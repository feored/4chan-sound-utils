import"../chunks/DsnmJJEf.js";import{x as oe,y as qe,M as Pe,b7 as Nt,z as Ft,E as It,G as Ut,b8 as Dt,aV as At,b9 as Ct,ak as Bt,F as Tt,D as Ke,C as Je,a0 as Pt,ba as Qe,L as Wt,K as zt,av as jt,aD as Ye,r as He,aC as Xt,N as Vt,q as $e,bb as Gt,I as Oe,u as Yt,bc as Ht,p as B,b as ce,g as t,ae as L,k as O,o as _,v as m,s as f,t as z,ah as he,m as p,n as T,V as g,aN as ye,b6 as ne,bd as Te,w as H,be as Zt,ag as G,l as U,bf as se,P as le,bg as qt,_ as te,ad as Ze,bh as Re}from"../chunks/D4KbEBlY.js";import{p as ie,i as j,r as de,b as ue,c as Kt}from"../chunks/CJXYB7lu.js";import{f as et,c as tt,g as $,s as Ie,d as Jt,h as rt,e as Me,i as Ue,j as Qt,r as Fe,k as at,l as ot,a as $t}from"../chunks/D9XZEmWM.js";import{b as De}from"../chunks/C_PBsP8N.js";function er(a,e,r,o,n,l){let s=oe;oe&&qe();var d,u,i=null;oe&&Pe.nodeType===Nt&&(i=Pe,qe());var v=oe?Pe:a,h,w=tt;Ft(()=>{const x=e()||null;var y=Dt;if(x!==d){var S=tt;et(w),h&&(x===null?Wt(h,()=>{h=null,u=null}):x===u?zt(h):(jt(h),Qe(!1))),x&&x!==u&&(h=Ut(()=>{if(i=oe?i:document.createElementNS(y,x),At(i,i),o){oe&&Ct(x)&&i.append(document.createComment(""));var E=oe?Bt(i):i.appendChild(Tt());oe&&(E===null?Ke(!1):Je(E)),o(i,E)}Pt.nodes_end=i,v.before(i)})),d=x,d&&(u=d),Qe(!0),et(S)}},It),s&&(Ke(!0),Je(v))}function pt(a,e,r=e){var o=Gt(),n=new WeakSet;Ye(a,"input",l=>{var s=l?a.defaultValue:a.value;if(s=ze(a)?je(s):s,r(s),Oe!==null&&n.add(Oe),o&&s!==(s=e())){var d=a.selectionStart,u=a.selectionEnd;a.value=s??"",u!==null&&(a.selectionStart=d,a.selectionEnd=Math.min(u,a.value.length))}}),(oe&&a.defaultValue!==a.value||Yt(e)==null&&a.value)&&(r(ze(a)?je(a.value):a.value),Oe!==null&&n.add(Oe)),He(()=>{var l=e();if(a===document.activeElement){var s=Ht??Oe;if(n.has(s))return}ze(a)&&l===je(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}const We=new Set;function nt(a,e,r,o,n=o){var l=r.getAttribute("type")==="checkbox",s=a;let d=!1;if(e!==null)for(var u of e)s=s[u]??=[];s.push(r),Ye(r,"change",()=>{var i=r.__value;l&&(i=it(s,i,r.checked)),n(i)},()=>n(l?[]:null)),He(()=>{var i=o();if(oe&&r.defaultChecked!==r.checked){d=!0;return}l?(i=i||[],r.checked=i.includes(r.__value)):r.checked=Xt(r.__value,i)}),Vt(()=>{var i=s.indexOf(r);i!==-1&&s.splice(i,1)}),We.has(s)||(We.add(s),$e(()=>{s.sort((i,v)=>i.compareDocumentPosition(v)===4?-1:1),We.delete(s)})),$e(()=>{if(d){var i;if(l)i=it(s,i,r.checked);else{var v=s.find(h=>h.checked);i=v?.__value}n(i)}})}function it(a,e,r){for(var o=new Set,n=0;n<a.length;n+=1)a[n].checked&&o.add(a[n].__value);return r||o.delete(e),Array.from(o)}function ze(a){var e=a.type;return e==="number"||e==="range"}function je(a){return a===""?null:+a}function tr(a,e,r=e){Ye(a,"change",()=>{r(a.files)}),oe&&a.files&&r(a.files),He(()=>{a.files=e()})}var rr=O('<div><div class="flash bd-muted bg-accent"><label for="source_media" style="font-weight:bold;">Upload a video or image</label> <input id="source_media" name="source_media" type="file"/></div></div>');function bt(a,e){B(e,!0);const r=["video/mp4","video/webm"],o=["image/jpeg","image/png","image/gif"];let n=ie(e,"current_file",15),l=ie(e,"accept_video",3,!0),s=ie(e,"accept_image",3,!0),d=he(()=>{const w=[];return l()&&w.push(...r),s()&&w.push(...o),w}),u=L(null);ce(()=>{t(u)&&t(u).length>0?n(t(u)[0]):n(null)});var i=rr(),v=_(i),h=m(_(v),2);f(v),f(i),z(w=>$(h,"accept",w),[()=>t(d).join(",")]),tr(h,()=>t(u),w=>g(u,w)),p(a,i),T()}function Z(a,e=!0){const r=Math.floor(a/3600).toString().padStart(2,"0"),o=Math.floor(a%3600/60).toString().padStart(2,"0"),n=Math.floor(a%60).toString().padStart(2,"0"),l=Math.floor(a%1*1e3).toString().padStart(3,"0"),s=`${o}:${n}.${l}`;return e?`${r}:${s}`:s}function ar(a,e,r=1e-4){return Math.abs(a-e)<r}function st(a,e){g(e,!0),document.body.style.cursor="ew-resize"}function or(a,e,r,o,n){if(!t(e)||!t(r)||!o.seekbar)return;const l=o.seekbar.getBoundingClientRect();let d=(a.touches[0].clientX-l.left)/(l.width-t(r).getBoundingClientRect().width);n(Math.max(0,Math.min(1,d))),o.seek_type==="handle"?o.on_seek?.(n()):o.on_seek?.(n(),!0)}var nr=O('<div class="p-.5 timer-display timer-text flash default unselectable svelte-wan5yw"> </div>'),ir=O("<div><!></div>");function Xe(a,e){B(e,!0);let r=ie(e,"progress",7),o=L(!1),n=L(!1),l=L(null);function s(){!t(o)||!t(l)||!e.seekbar||(g(o,!1),document.body.style.cursor="auto",e.on_release?.())}function d(y){if(!t(o)||!t(l)||!e.seekbar)return;const S=e.seekbar.getBoundingClientRect();let E=(y.clientX-S.left)/(S.width-t(l).getBoundingClientRect().width);r(Math.max(0,Math.min(1,E))),e.seek_type==="handle"?e.on_seek?.(r()):e.on_seek?.(r(),!0)}function u(){if(!t(l)||!e.seekbar)return"0%";const y=e.seekbar.getBoundingClientRect();let S=(y.width-t(l).getBoundingClientRect().width)/y.width;return e.seek_type==="handle"||e.seek_type==="right_bracket"?`${r()*100*S}%`:`${r()*100}%`}var i=ir();ne("mouseup",Te,s),ne("mousemove",Te,d);let v;i.__touchstart=[st,o],i.__touchend=s,i.__touchmove=[or,o,l,e,r],i.__mousedown=[st,o],i.__mousemove=d;let h;var w=_(i);{var x=y=>{var S=nr(),E=_(S,!0);f(S),z(F=>H(E,F),[()=>Z(r()*e.duration,!1)]),p(y,S)};j(w,y=>{(t(n)||t(o))&&y(x)})}f(i),De(i,y=>g(l,y),()=>t(l)),z((y,S)=>{v=Ie(i,1,`draggable ${e.seek_type??""} unselectable`,"svelte-wan5yw",v,y),h=Jt(i,"",h,S)},[()=>({"z-index-100":t(n)||t(o)}),()=>({left:u()})]),ne("touchcancel",i,s),ne("mouseenter",i,()=>g(n,!0)),ne("mouseleave",i,()=>g(n,!1)),p(a,i),T()}ye(["touchstart","touchend","touchmove","mousedown","mousemove"]);var sr=O('<div class="parent svelte-hswmh"><div class="seekbar svelte-hswmh"><!> <!> <!></div></div>');function lr(a,e){B(e,!0);let r=L(null);var o=sr(),n=_(o),l=_(n);{let u=he(()=>e.video_data.start_progress??0);Xe(l,{get progress(){return t(u)},seek_type:"left_bracket",get seekbar(){return t(r)},get on_seek(){return e.on_start_seek},get duration(){return e.video_data.duration},get on_release(){return e.on_release}})}var s=m(l,2);{let u=he(()=>e.video_data.end_progress??100);Xe(s,{get progress(){return t(u)},seek_type:"right_bracket",get seekbar(){return t(r)},get on_seek(){return e.on_end_seek},get duration(){return e.video_data.duration},get on_release(){return e.on_release}})}var d=m(s,2);{let u=he(()=>e.video_data.progress??0);Xe(d,{get progress(){return t(u)},seek_type:"handle",get seekbar(){return t(r)},get on_seek(){return e.on_seek},get duration(){return e.video_data.duration}})}f(n),De(n,u=>g(r,u),()=>t(r)),f(o),p(a,o),T()}/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const dr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var cr=Zt("<svg><!><!></svg>");function fe(a,e){B(e,!0);const r=ie(e,"color",3,"currentColor"),o=ie(e,"size",3,24),n=ie(e,"strokeWidth",3,2),l=ie(e,"absoluteStrokeWidth",3,!1),s=ie(e,"iconNode",19,()=>[]),d=de(e,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var u=cr();rt(u,h=>({...dr,...d,width:o(),height:o(),stroke:r(),"stroke-width":h,class:["lucide-icon lucide",e.name&&`lucide-${e.name}`,e.class]}),[()=>l()?Number(n())*24/Number(o()):n()]);var i=_(u);Me(i,17,s,Ue,(h,w)=>{var x=he(()=>qt(t(w),2));let y=()=>t(x)[0],S=()=>t(x)[1];var E=G(),F=U(E);er(F,y,!0,(P,X)=>{rt(P,()=>({...S()}))}),p(h,E)});var v=m(i);se(v,()=>e.children??le),f(u),p(a,u),T()}function ur(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];fe(a,ue({name:"circle-alert"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function fr(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];fe(a,ue({name:"infinity"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function _r(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];fe(a,ue({name:"info"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function vr(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1"}]];fe(a,ue({name:"pause"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function mr(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];fe(a,ue({name:"play"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function gr(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"m17 2 4 4-4 4"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}],["path",{d:"m7 22-4-4 4-4"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3"}],["path",{d:"M11 10h1v4"}]];fe(a,ue({name:"repeat-1"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function hr(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];fe(a,ue({name:"square"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function pr(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]];fe(a,ue({name:"volume-2"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function br(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M16 9a5 5 0 0 1 .95 2.293"}],["path",{d:"M19.364 5.636a9 9 0 0 1 1.889 9.96"}],["path",{d:"m2 2 20 20"}],["path",{d:"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11"}],["path",{d:"M9.828 4.172A.686.686 0 0 1 11 4.657v.686"}]];fe(a,ue({name:"volume-off"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function lt(a,e){B(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];fe(a,ue({name:"x"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=U(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function wr(a,e,r){e()&&(e().pause(),r())}function yr(a,e,r,o){e()&&((e().ended||ar(r.video_data.progress,r.video_data.end_progress))&&o(),e().play())}var xr=(a,e)=>e()?.pause(),Er=O('<button class="bd-accent svelte-m6aj9m"><!></button>'),kr=O('<button class="svelte-m6aj9m"><!></button>'),Rr=(a,e)=>g(e,!t(e)),Mr=(a,e)=>g(e,!t(e)),Lr=O('<div class="controls-container svelte-m6aj9m"><div class="controls svelte-m6aj9m"><!> <button class="svelte-m6aj9m"><!></button> <div class="timer-text flash accent svelte-m6aj9m"> </div> <div class="timer-text flash attention svelte-m6aj9m"> </div></div> <div class="controls svelte-m6aj9m"><button><!></button> <button><!></button></div></div>');function Sr(a,e){B(e,!0);let r=ie(e,"video",7);ce(()=>{r()&&(r().addEventListener("play",()=>g(o,!0)),r().addEventListener("pause",()=>g(o,!1)),r().addEventListener("ended",()=>g(o,!1)),r().addEventListener("loadstart",()=>g(o,!1)))});let o=L(!1),n=L(!0),l=L(!0);function s(){!r()||!e.video_data||(r().currentTime=e.video_data.start_progress*e.video_data.duration)}ce(()=>{r()&&(r().loop=t(n),r().muted=!t(l))});var d=Lr(),u=_(d),i=_(u);{var v=b=>{var R=Er();R.__click=[xr,r];var k=_(R);vr(k,{}),f(R),p(b,R)},h=b=>{var R=kr();R.__click=[yr,r,e,s];var k=_(R);mr(k,{}),f(R),p(b,R)};j(i,b=>{t(o)?b(v):b(h,!1)})}var w=m(i,2);w.__click=[wr,r,s];var x=_(w);hr(x,{}),f(w);var y=m(w,2),S=_(y);f(y);var E=m(y,2),F=_(E);f(E),f(u);var P=m(u,2),X=_(P);X.__click=[Rr,n];let q;var D=_(X);{var W=b=>{fr(b,{})},Y=b=>{gr(b,{})};j(D,b=>{t(n)?b(W):b(Y,!1)})}f(X);var V=m(X,2);V.__click=[Mr,l];let K;var c=_(V);{var M=b=>{pr(b,{})},N=b=>{br(b,{})};j(c,b=>{t(l)?b(M):b(N,!1)})}f(V),f(P),f(d),z((b,R,k,A,C,J,re)=>{H(S,`${b??""} / ${R??""}`),H(F,`[${k??""} : ${A??""}] (${C??""})`),q=Ie(X,1,"svelte-m6aj9m",null,q,J),K=Ie(V,1,"svelte-m6aj9m",null,K,re)},[()=>Z(e.video_data.current_time,!1),()=>Z(e.video_data.duration,!1),()=>Z(e.video_data.start_progress*e.video_data.duration,!1),()=>Z(e.video_data.end_progress*e.video_data.duration,!1),()=>Z((e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration,!1),()=>({"bd-accent":t(n)}),()=>({"bd-accent":t(l)})]),p(a,d),T()}ye(["click"]);const dt=["NW","N","NE","W","E","SW","S","SE"],Or="#000000E6",Q=12,ct=64;function ke(){return{enabled:t(wt),x:t(Ne)?.origin.x||0,y:t(Ne)?.origin.y||0,width:t(Ne)?.width||0,height:t(Ne)?.height||0}}let Ne=L(null),wt=L(!1);function Nr(a,e,r,o,n,l){if(!t(e))return;const s=t(e).getBoundingClientRect(),d=a.clientX-s.left,u=a.clientY-s.top,i=r({x:d,y:u});if(i){i==="surface"?(t(e).style.cursor="move",g(o,{x:d,y:u},!0)):t(e).style.cursor=`${i}-resize`,g(n,!0),g(l,i,!0);return}}var Fr=O('<canvas class="svelte-1frae8d"></canvas> <div><code> </code></div>',1);function Ir(a,e){B(e,!0);let r=L(null),o=L(te({width:0,height:0})),n=L(te({width:0,height:0})),l=L(!1),s=L(!1),d=L(te({x:0,y:0})),u=L("NW"),i=L(te({p0:{x:0,y:0},p1:{x:t(o).width,y:t(o).height}}));Ze(()=>{window.addEventListener("resize",h)}),ce(()=>{e.video&&e.video.addEventListener("loadedmetadata",h)}),ce(()=>{g(Ne,t(v),!0),g(wt,t(v).width<t(n).width||t(v).height<t(n).height,!0)});let v=he(()=>{if(!t(r)||!e.video)return{origin:{x:0,y:0},width:0,height:0};const c=e.video.videoWidth/e.video.offsetWidth,M=Math.min(Math.round((t(i).p1.x-t(i).p0.x)*c),t(n).width),N=Math.min(Math.round((t(i).p1.y-t(i).p0.y)*c),t(n).height);return{origin:{x:Math.round(t(i).p0.x*c),y:Math.round(t(i).p0.y*c)},width:M,height:N}});function h(){!t(r)||!e.video||(g(o,{width:e.video.offsetWidth,height:e.video.offsetHeight},!0),g(n,{width:e.video.videoWidth,height:e.video.videoHeight},!0),g(i,{p0:{x:0,y:0},p1:{x:t(o).width,y:t(o).height}},!0))}function w(){if(!t(r))return;const c=t(r).getContext("2d");c&&(c.clearRect(0,0,t(o).width,t(o).height),x(c),t(s)&&(y(c),S(c)))}function x(c){c.fillStyle=Or,c.fillRect(0,0,t(i).p0.x,t(i).p0.y),c.fillRect(t(i).p0.x,0,t(i).p1.x-t(i).p0.x,t(i).p0.y),c.fillRect(t(i).p1.x,0,t(o).width-t(i).p1.x,t(i).p0.y),c.fillRect(0,t(i).p0.y,t(i).p0.x,t(i).p1.y-t(i).p0.y),c.fillRect(t(i).p1.x,t(i).p0.y,t(o).width-t(i).p1.x,t(i).p1.y-t(i).p0.y),c.fillRect(0,t(i).p1.y,t(i).p0.x,t(o).height-t(i).p1.y),c.fillRect(t(i).p0.x,t(i).p1.y,t(i).p1.x-t(i).p0.x,t(o).height-t(i).p1.y),c.fillRect(t(i).p1.x,t(i).p1.y,t(o).width-t(i).p1.x,t(o).height-t(i).p1.y)}function y(c){c.strokeStyle="#FFF",c.lineWidth=2,c.strokeRect(t(i).p0.x,t(i).p0.y,t(i).p1.x-t(i).p0.x,t(i).p1.y-t(i).p0.y),c.strokeStyle="#111",c.lineWidth=2,c.strokeRect(t(i).p0.x+2,t(i).p0.y+2,t(i).p1.x-t(i).p0.x-4,t(i).p1.y-t(i).p0.y-4)}function S(c){if(!t(r))return;c.fillStyle="#FFF",c.strokeStyle="#111",c.lineWidth=1;const M=E();for(const N of dt){const b=M[N];c.fillRect(b.x,b.y,Q,Q),c.strokeRect(b.x,b.y,Q,Q)}}ce(()=>{!t(r)||!t(r).getContext("2d")||w()});function E(){const c=t(i).p1.x-t(i).p0.x,M=t(i).p1.y-t(i).p0.y,N=t(i).p0.x+c/2-Q/2,b=t(i).p0.y+M/2-Q/2;return{NW:{x:t(i).p0.x,y:t(i).p0.y},N:{x:N,y:t(i).p0.y},NE:{x:t(i).p1.x-Q,y:t(i).p0.y},W:{x:t(i).p0.x,y:b},E:{x:t(i).p1.x-Q,y:b},SW:{x:t(i).p0.x,y:t(i).p1.y-Q},S:{x:N,y:t(i).p1.y-Q},SE:{x:t(i).p1.x-Q,y:t(i).p1.y-Q}}}function F({x:c,y:M}){const N=E();for(const b of dt){const R=N[b];if(c>=R.x&&c<=R.x+Q&&M>=R.y&&M<=R.y+Q)return b}return c>=t(i).p0.x&&c<=t(i).p1.x&&M>=t(i).p0.y&&M<=t(i).p1.y?"surface":null}function P(c){!t(r)||!t(l)||(t(r).style.cursor="auto",g(l,!1))}function X(c){if(!t(r))return;if(!t(l)){const k=t(r).getBoundingClientRect(),A=c.clientX-k.left,C=c.clientY-k.top,J=F({x:A,y:C});J?J==="surface"?(t(r).style.cursor="move",g(s,!0)):(t(r).style.cursor=`${J}-resize`,g(s,!1)):(t(r).style.cursor="auto",g(s,!1));return}const M=t(r).getBoundingClientRect(),N=c.clientX-M.left,b=c.clientY-M.top;if(t(u)==="surface"){const k=N-t(d).x,A=b-t(d).y,C={p0:{x:t(i).p0.x+k,y:t(i).p0.y+A},p1:{x:t(i).p1.x+k,y:t(i).p1.y+A}};C.p0.x>0&&C.p1.x<t(o).width&&(t(i).p0.x=C.p0.x,t(i).p1.x=C.p1.x),C.p0.y>0&&C.p1.y<t(o).height&&(t(i).p0.y=C.p0.y,t(i).p1.y=C.p1.y),g(d,{x:N,y:b},!0)}else{let k={p0:{...t(i).p0},p1:{...t(i).p1}};t(u).includes("N")?k.p0.y=Math.max(0,Math.min(t(i).p1.y,b)):t(u).includes("S")&&(k.p1.y=Math.min(t(o).height,Math.max(t(i).p0.y,b))),k.p1.y-k.p0.y>=ct&&(t(i).p0.y=k.p0.y,t(i).p1.y=k.p1.y),t(u).includes("W")?k.p0.x=Math.max(0,Math.min(t(i).p1.x,N)):t(u).includes("E")&&(k.p1.x=Math.min(t(o).width,Math.max(t(i).p0.x,N))),k.p1.x-k.p0.x>=ct&&(t(i).p0.x=k.p0.x,t(i).p1.x=k.p1.x)}t(r).getContext("2d")&&w()}function q(){t(l)||g(s,!1)}var D=Fr();ne("mouseup",Te,P),ne("mousemove",Te,X);var W=U(D);W.__mousedown=[Nr,r,F,d,l,u],De(W,c=>g(r,c),()=>t(r));var Y=m(W,2),V=_(Y),K=_(V);f(V),f(Y),z(()=>{$(W,"width",t(o).width),$(W,"height",t(o).height),H(K,`Cropped: ${t(v).width??""} x ${t(v).height??""} - Original: ${t(n).width??""} x ${t(n).height??""}`)}),ne("mouseenter",W,onmouseenter),ne("mouseleave",W,q),p(a,D),T()}ye(["mousedown"]);var Ur=O("<li> </li>"),Dr=O('<div class="flash muted"><ul><p><b>Log</b></p> <!></ul></div>');function yt(a,e){B(e,!0);const r=()=>(e.ffmpeg_manager.is_loaded()&&e.message_manager.toggle_ffmpeg_listen(!0,e.ffmpeg_manager),()=>{e.message_manager.toggle_ffmpeg_listen(!1,e.ffmpeg_manager)});var o=Dr(),n=_(o),l=m(_(n),2);Me(l,17,()=>Object.values(e.message_manager.messages),Ue,(s,d)=>{var u=Ur();let i;var v=_(u,!0);f(u),z(h=>{i=Ie(u,1,"svelte-w19oiv",null,i,h),H(v,t(d).message)},[()=>({error:t(d).error})]),p(s,u)}),f(n),f(o),Qt(o,()=>r),p(a,o),T()}let xt={};const ut=new WeakMap,ft={metric:[{from:0,to:1e3,unit:"B",long:"bytes"},{from:1e3,to:1e6,unit:"kB",long:"kilobytes"},{from:1e6,to:1e9,unit:"MB",long:"megabytes"},{from:1e9,to:1e12,unit:"GB",long:"gigabytes"},{from:1e12,to:1e15,unit:"TB",long:"terabytes"},{from:1e15,to:1e18,unit:"PB",long:"petabytes"},{from:1e18,to:1e21,unit:"EB",long:"exabytes"},{from:1e21,to:1e24,unit:"ZB",long:"zettabytes"},{from:1e24,to:1e27,unit:"YB",long:"yottabytes"}],metric_octet:[{from:0,to:1e3,unit:"o",long:"octets"},{from:1e3,to:1e6,unit:"ko",long:"kilooctets"},{from:1e6,to:1e9,unit:"Mo",long:"megaoctets"},{from:1e9,to:1e12,unit:"Go",long:"gigaoctets"},{from:1e12,to:1e15,unit:"To",long:"teraoctets"},{from:1e15,to:1e18,unit:"Po",long:"petaoctets"},{from:1e18,to:1e21,unit:"Eo",long:"exaoctets"},{from:1e21,to:1e24,unit:"Zo",long:"zettaoctets"},{from:1e24,to:1e27,unit:"Yo",long:"yottaoctets"}],iec:[{from:0,to:Math.pow(1024,1),unit:"B",long:"bytes"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"KiB",long:"kibibytes"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"MiB",long:"mebibytes"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"GiB",long:"gibibytes"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"TiB",long:"tebibytes"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"PiB",long:"pebibytes"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"EiB",long:"exbibytes"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"ZiB",long:"zebibytes"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"YiB",long:"yobibytes"}],iec_octet:[{from:0,to:Math.pow(1024,1),unit:"o",long:"octets"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"Kio",long:"kibioctets"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"Mio",long:"mebioctets"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"Gio",long:"gibioctets"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"Tio",long:"tebioctets"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"Pio",long:"pebioctets"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"Eio",long:"exbioctets"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"Zio",long:"zebioctets"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"Yio",long:"yobioctets"}]};class Ar{constructor(e,r){r=Object.assign({units:"metric",precision:1,locale:void 0},xt,r),ut.set(this,r),Object.assign(ft,r.customUnits);const o=e<0?"-":"";e=Math.abs(e);const n=ft[r.units];if(n){const l=n.find(s=>e>=s.from&&e<s.to);if(l){const s=new Intl.NumberFormat(r.locale,{style:"decimal",maximumFractionDigits:r.precision}),d=l.from===0?o+s.format(e):o+s.format(e/l.from);this.value=d,this.unit=l.unit,this.long=l.long}else this.value=o+e,this.unit="",this.long=""}else throw new Error(`Invalid units specified: ${r.units}`)}toString(){const e=ut.get(this);return e.toStringFn?e.toStringFn.bind(this)():`${this.value} ${this.unit}`}}function Le(a,e){return new Ar(a,e)}Le.defaultOptions=function(a){xt=a};var Cr=O('<div class="flash danger"><p><!> </p></div>'),Br=O(`<div class="flash danger"><p><!> Estimated file size too large: <code> </code>. Reduce either duration or
			bitrate.</p></div>`),Tr=O("<!> <!>",1);function Pr(a,e){B(e,!0);const r=120,o=4096*1024;let n=he(()=>{if(!e.export_settings.settings||!e.export_settings.settings.bitrate)return 0;const v=e.export_settings.settings.bitrate;return(e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration*v*1e3/8});var l=Tr(),s=U(l);{var d=v=>{var h=Cr(),w=_(h),x=_(w);lt(x,{style:"vertical-align:text-bottom;"});var y=m(x);f(w),f(h),z(S=>H(y,` Duration too long: Current: ${S??""} seconds, Limit: 120 seconds`),[()=>((e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration).toFixed(2)]),p(v,h)};j(s,v=>{(e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration>r&&v(d)})}var u=m(s,2);{var i=v=>{var h=Br(),w=_(h),x=_(w);lt(x,{style:"vertical-align:text-bottom;"});var y=m(x,2),S=_(y);f(y),Re(),f(w),f(h),z((E,F)=>H(S,`${E??""}/${F??""}`),[()=>Le(t(n)),()=>Le(o)]),p(v,h)};j(u,v=>{t(n)>o&&v(i)})}p(a,l),T()}const Wr=["none","film","animation","stillimage","zerolatency"],zr=["None","Film","Animation","Still Image","Zero Latency"],jr=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow"],Xr=["Ultra Fast","Super Fast","Very Fast","Faster","Fast","Medium","Slow","Slower","Very Slow"],Vr=/\[sound=(?<url>.*)]/,Gr=["jpg","jpeg","png","gif"],Yr=["mp4","webm","mkv"],Hr=["mp3","wav","ogg"];function _t(a){const e=a.match(Vr);let r=null;return e&&e.groups&&e.groups.url&&(r=decodeURIComponent(e.groups.url),r.startsWith("http")||(r="https://"+r)),r}function Ve(a){const e=a.split(".").pop()?.toLowerCase();if(e){if(Gr.includes(e))return"image";if(Yr.includes(e))return"video";if(Hr.includes(e))return"audio"}return"unknown"}function Et(a){return Ve(a)==="image"}function Zr(a){return a.replaceAll(/\[.+?\]/g,"").split(".")[0].trim()}var qr=O("<option> </option>"),Kr=O("<option> </option>"),Jr=O(`<fieldset><legend>Preset</legend> <p>Slower will yield higher quality encodes.</p> <select></select></fieldset> <fieldset><legend>Tune</legend> <p>Optimize the output for specific content types. <br/>Pick <i>Still Image</i> if your input is
				an image file.</p> <select></select></fieldset>`,1),Qr=O('<div class="flash bd-muted"><p><b>FFmpeg settings</b></p> <fieldset><legend>Output format</legend> <p>MP4 highly recommended.</p> <div><label><input type="radio" name="output_format"/> MP4 (H.264)</label> <label><input type="radio" name="output_format"/> WebM (VP8 + 256k Vorbis)</label></div></fieldset> <fieldset><legend>Target Bitrate</legend> <input name="bitrate_range" type="range" min="256" max="16384" step="256"/> <label for="bitrate_range"> </label></fieldset> <!></div>');function kt(a,e){B(e,!0);const r=[];let o=ie(e,"export_settings",15),n=L("fast"),l=L(2048),s=L("mp4"),d=he(()=>Et(e.file_name)?"stillimage":"none");ce(()=>{o()&&(t(s)==="mp4"?o(o().settings={preset:t(n),tune:t(d),bitrate:t(l)},!0):t(s)==="webm"&&o(o().settings={bitrate:t(l)},!0),o(o().output_format=t(s),!0))});var u=Qr(),i=m(_(u),2),v=m(_(i),4),h=_(v),w=_(h);Fe(w),w.value=w.__value="mp4",Re(),f(h);var x=m(h,2),y=_(x);Fe(y),y.value=y.__value="webm",Re(),f(x),f(v),f(i);var S=m(i,2),E=m(_(S),2);Fe(E);var F=m(E,2),P=_(F);f(F),f(S);var X=m(S,2);{var q=D=>{var W=Jr(),Y=U(W),V=m(_(Y),4);Me(V,21,()=>jr,Ue,(M,N,b)=>{var R=qr(),k=_(R,!0);f(R);var A={};z(()=>{at(R,t(n)===t(N)),H(k,Xr[b]),A!==(A=t(N))&&(R.value=(R.__value=t(N))??"")}),p(M,R)}),f(V),f(Y);var K=m(Y,2),c=m(_(K),4);Me(c,21,()=>Wr,Ue,(M,N,b)=>{var R=Kr(),k=_(R,!0);f(R);var A={};z(()=>{at(R,t(d)===t(N)),H(k,zr[b]),A!==(A=t(N))&&(R.value=(R.__value=t(N))??"")}),p(M,R)}),f(c),f(K),ot(V,()=>t(n),M=>g(n,M)),ot(c,()=>t(d),M=>g(d,M)),p(D,W)};j(X,D=>{t(s)==="mp4"&&D(q)})}f(u),z(D=>H(P,`Up to ${D??""}/s`),[()=>Le(t(l)*1e3/8)]),nt(r,[],w,()=>t(s),D=>g(s,D)),nt(r,[],y,()=>t(s),D=>g(s,D)),pt(E,()=>t(l),D=>g(l,D)),p(a,u),T()}var I;(function(a){a.LOAD="LOAD",a.EXEC="EXEC",a.FFPROBE="FFPROBE",a.WRITE_FILE="WRITE_FILE",a.READ_FILE="READ_FILE",a.DELETE_FILE="DELETE_FILE",a.RENAME="RENAME",a.CREATE_DIR="CREATE_DIR",a.LIST_DIR="LIST_DIR",a.DELETE_DIR="DELETE_DIR",a.ERROR="ERROR",a.DOWNLOAD="DOWNLOAD",a.PROGRESS="PROGRESS",a.LOG="LOG",a.MOUNT="MOUNT",a.UNMOUNT="UNMOUNT"})(I||(I={}));const $r=(()=>{let a=0;return()=>a++})(),ea=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),ta=new Error("called FFmpeg.terminate()");class ra{#e=null;#a={};#r={};#o=[];#n=[];loaded=!1;#i=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:r,data:o}})=>{switch(r){case I.LOAD:this.loaded=!0,this.#a[e](o);break;case I.MOUNT:case I.UNMOUNT:case I.EXEC:case I.FFPROBE:case I.WRITE_FILE:case I.READ_FILE:case I.DELETE_FILE:case I.RENAME:case I.CREATE_DIR:case I.LIST_DIR:case I.DELETE_DIR:this.#a[e](o);break;case I.LOG:this.#o.forEach(n=>n(o));break;case I.PROGRESS:this.#n.forEach(n=>n(o));break;case I.ERROR:this.#r[e](o);break}delete this.#a[e],delete this.#r[e]})};#t=({type:e,data:r},o=[],n)=>this.#e?new Promise((l,s)=>{const d=$r();this.#e&&this.#e.postMessage({id:d,type:e,data:r},o),this.#a[d]=l,this.#r[d]=s,n?.addEventListener("abort",()=>{s(new DOMException(`Message # ${d} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(ea);on(e,r){e==="log"?this.#o.push(r):e==="progress"&&this.#n.push(r)}off(e,r){e==="log"?this.#o=this.#o.filter(o=>o!==r):e==="progress"&&(this.#n=this.#n.filter(o=>o!==r))}load=({classWorkerURL:e,...r}={},{signal:o}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("../workers/worker-BAOIWoxA.js",import.meta.url).href,import.meta.url),{type:"module"}),this.#i()),this.#t({type:I.LOAD,data:r},void 0,o));exec=(e,r=-1,{signal:o}={})=>this.#t({type:I.EXEC,data:{args:e,timeout:r}},void 0,o);ffprobe=(e,r=-1,{signal:o}={})=>this.#t({type:I.FFPROBE,data:{args:e,timeout:r}},void 0,o);terminate=()=>{const e=Object.keys(this.#r);for(const r of e)this.#r[r](ta),delete this.#r[r],delete this.#a[r];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,r,{signal:o}={})=>{const n=[];return r instanceof Uint8Array&&n.push(r.buffer),this.#t({type:I.WRITE_FILE,data:{path:e,data:r}},n,o)};mount=(e,r,o)=>{const n=[];return this.#t({type:I.MOUNT,data:{fsType:e,options:r,mountPoint:o}},n)};unmount=e=>{const r=[];return this.#t({type:I.UNMOUNT,data:{mountPoint:e}},r)};readFile=(e,r="binary",{signal:o}={})=>this.#t({type:I.READ_FILE,data:{path:e,encoding:r}},void 0,o);deleteFile=(e,{signal:r}={})=>this.#t({type:I.DELETE_FILE,data:{path:e}},void 0,r);rename=(e,r,{signal:o}={})=>this.#t({type:I.RENAME,data:{oldPath:e,newPath:r}},void 0,o);createDir=(e,{signal:r}={})=>this.#t({type:I.CREATE_DIR,data:{path:e}},void 0,r);listDir=(e,{signal:r}={})=>this.#t({type:I.LIST_DIR,data:{path:e}},void 0,r);deleteDir=(e,{signal:r}={})=>this.#t({type:I.DELETE_DIR,data:{path:e}},void 0,r)}var vt;(function(a){a.MEMFS="MEMFS",a.NODEFS="NODEFS",a.NODERAWFS="NODERAWFS",a.IDBFS="IDBFS",a.WORKERFS="WORKERFS",a.PROXYFS="PROXYFS"})(vt||(vt={}));class Rt{current_id=0;ids=[];ffmpeg_process_id=0;#e=L(te({}));get messages(){return t(this.#e)}set messages(e){g(this.#e,e,!0)}log(e,r){this.add_message({message:e,error:!1},r)}error(e,r){this.add_message({message:`Error: ${e}`,error:!0},r)}add_message(e,r){r||(r=`message_${this.current_id}`,this.current_id+=1),this.ids.includes(r)||this.ids.push(r),this.messages={...this.messages,[r]:e},e.error?console.error(`${e.message} (${r})`):console.log(`${e.message} (${r})`)}reset(){this.current_id=0,this.ids=[],this.messages={},this.ffmpeg_process_id=0}bump_ffmpeg_process_id(){this.ffmpeg_process_id+=1}listen_ffmpeg_message=e=>{let r=`FFmpeg [${e.type}]: ${e.message}`;this.log(r,`ffmpeg_message_${this.ffmpeg_process_id}`)};listen_ffmpeg_progress=e=>{const r=e.progress*100;this.log(`FFmpeg [progress]: ${r.toFixed(2)}%`,`ffmpeg_progress_${this.ffmpeg_process_id}`)};toggle_ffmpeg_listen(e,r){r.manage_listeners(e,this.listen_ffmpeg_message,this.listen_ffmpeg_progress)}}const aa=""+new URL("../assets/ffmpeg-core.CI9Irx9p.js",import.meta.url).href,oa=""+new URL("../assets/ffmpeg-core.CgUfceKH.wasm",import.meta.url).href;class Mt{ffmpeg_instance=null;ffmpeg_loaded=!1;get_instance(){return this.ffmpeg_instance}is_loaded(){return this.ffmpeg_loaded}async init(){if(!this.ffmpeg_loaded)try{this.ffmpeg_instance=new ra,await this.ffmpeg_instance.load({coreURL:aa,wasmURL:oa}),console.log("FFmpeg loaded successfully."),this.ffmpeg_loaded=!0}catch(e){throw console.error("Failed to load FFmpeg:",e),e}}manage_listeners(e,r,o){if(!this.ffmpeg_instance){console.error("FFmpeg is not initialized.");return}const n=e?"on":"off";this.ffmpeg_instance[n]("log",r),this.ffmpeg_instance[n]("progress",o)}}const na=a=>new Promise((e,r)=>{const o=new FileReader;o.onload=()=>{const{result:n}=o;n instanceof ArrayBuffer?e(new Uint8Array(n)):e(new Uint8Array)},o.onerror=n=>{r(Error(`File could not be read! Code=${n?.target?.error?.code||-1}`))},o.readAsArrayBuffer(a)}),Ge=async a=>{let e;if(typeof a=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(a)?e=atob(a.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(a)).arrayBuffer();else if(a instanceof URL)e=await(await fetch(a)).arrayBuffer();else if(a instanceof File||a instanceof Blob)e=await na(a);else return new Uint8Array;return new Uint8Array(e)};function ia(a,e,r){const o=a.settings,n=sa(e,r);return Et(e.name)&&la(n),a.trim&&ca(n,a.trim),ua(n,o),da(n,a),fa(n),n}function sa(a,e){const r=["-i",a.name];return e&&(r.push("-i",e.name),r.push("-map","1:a:0")),r.push("-map","0:v:0"),r}function la(a){a.unshift("-loop","1","-r","1"),a.push("-shortest","-r","1")}function da(a,e){const r=[];e.crop.enabled&&r.push(`crop=${e.crop.width}:${e.crop.height}:${e.crop.x}:${e.crop.y}`),e.scale_down?r.push("scale=w=2048:h=2048:force_original_aspect_ratio=decrease:force_divisible_by=2"):r.push("pad=ceil(iw/2)*2:ceil(ih/2)*2"),r.length>0&&a.push("-vf",r.join(","))}function ca(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",Z(r)),a.push("-ss",Z(o)),a.push("-t",Z(e.end-e.start))}function ua(a,e){a.push("-c:v","libx264","-preset",e.preset),e.tune!=="none"&&a.push("-tune",e.tune),e.bitrate&&a.push("-b:v",`${e.bitrate}k`)}function fa(a){a.push("-pix_fmt:v","yuv420p","output.mp4")}function _a(a,e,r){const o=a.settings,n=r&&a.remove_audio===!1,l=va(e);return n&&ma(l,r),a.trim&&ga(l,a.trim),pa(l,o),ha(l,a),n&&ba(l),wa(l),l}function va(a){return["-i",a.name,"-map","0:v:0"]}function ma(a,e){a.push("-i",e.name,"-map","1:a:0")}function ga(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",Z(r)),a.push("-ss",Z(o)),a.push("-t",Z(e.end-e.start))}function ha(a,e){const r=[];e.crop.enabled&&r.push(`crop=${e.crop.width}:${e.crop.height}:${e.crop.x}:${e.crop.y}`),e.scale_down&&r.push("scale=w=2048:h=2048:force_original_aspect_ratio=decrease"),r.length>0&&a.push("-vf",r.join(","))}function pa(a,e){a.push("-c:v","libvpx","-crf","10","-b:v",`${e.bitrate}k`)}function ba(a){a.push("-c:a","libvorbis","-b:a","256k")}function wa(a){a.push("output.webm")}function ya(a,e){const r=xa(e);return a.trim&&Ea(r,a.trim),ka(r),Ra(r),r}function xa(a){return["-i",a.name,"-map","0:a:0"]}function Ea(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",Z(r)),a.push("-ss",Z(o)),a.push("-t",Z(e.end-e.start))}function ka(a){a.push("-c:a","libvorbis","-b:a","256k")}function Ra(a){a.push("output.ogg")}function Lt(a,e,r){switch(a.output_format){case"mp4":return ia(a,e,r);case"webm":return _a(a,e,r);case"ogg":return ya(a,e);default:throw new Error(`Unsupported output format: ${a.output_format}`)}}async function mt(a,e,r,o,n){o.log("Writing input file to ffmpeg..."),await a.writeFile(e.name,await Ge(e.blob));const l=Lt(r,e);o.log("ffmpeg "+l.join(" ")),await a.exec(l),o.bump_ffmpeg_process_id(),o.log("Reading output...");const d=await a.readFile(`output.${r.output_format}`);return new Blob([d],{type:`${n}/${r.output_format}`})}const gt={progress:0,current_time:0,duration:0,start_progress:0,end_progress:1};var Ma=O(`<div class="flash accent"><p><!> The cropped video exceeds the maximum resolution of 2048x2048 pixels and will be scaled
					down.</p></div>`),La=(a,e)=>{e()},Sa=O('<section class="flash px-2 bd-muted"><div class="media-container"><video>Your browser does not support the video tag.</video> <!></div> <section><!> <!></section></section> <!> <!> <!> <button type="submit">Split</button>',3),Oa=(a,e)=>{navigator.clipboard.writeText(e())},Na=O('<div class="flash muted"><p>Complete filename</p> <div class="flex" style="gap:1rem"><input type="text"/> <input type="button" style="flex-basis:max-content" value="Copy"/></div></div>'),Fa=O(`<div class="flash bd-muted"><p><b>Extracted audio</b></p> <audio controls></audio> <div class="flash muted"><p>Optional: Upload the audio file to a hosting service and paste the link here to generate
						the video filename with [sound=URL] tag.</p> <input type="text" placeholder="https://example.com/sound.ogg"/></div> <p><b>Video result</b></p> <video controls></video> <!> <p><a title="Download processed video"><button>Download</button></a></p></div>`,2),Ia=O("<!> <!>",1),Ua=O(`<div class="flash bg-muted bd-muted"><p><b class="default">Instructions</b></p> <p>Upload a video, trim it and crop it.<br/>Click on 'split' to split the audio and video into
			separate files.<br/> The video file will be resized to fit within the 2048x2048 requirements if it's too large.<br/></p></div>`),Da=O("<!> <!>",1);function Aa(a,e){B(e,!0);let r=L(null),o=L(null),n=L(te(gt)),l=L(!1);const s=new Rt,d=new Mt;let u=L("ready"),i=L(te({output_format:"mp4",settings:{preset:"fast",tune:"none",bitrate:2048},crop:ke()})),v=L(te({name:"",blob:new Blob})),h=L(te({name:"",blob:new Blob})),w=L("");Ze(()=>{setInterval(function(){F(new Event("ontimeupdate"))},1/24*1e3),d.init()}),ce(()=>{t(r)&&(g(n,gt,!0),g(u,"ready"))});function x(c){t(n).start_progress=c,t(n).start_progress>t(n).end_progress&&(t(n).end_progress=t(n).start_progress+.05),t(o)&&(g(l,!0),t(o).currentTime=c*t(o).duration,t(n).progress<t(n).start_progress&&(t(n).progress=t(n).start_progress))}function y(c){t(n).end_progress=c,t(n).end_progress<t(n).start_progress&&(t(n).start_progress=t(n).end_progress-.05),t(o)&&(g(l,!0),t(o).currentTime=c*t(o).duration,t(n).progress>t(n).end_progress&&(t(n).progress=t(n).end_progress))}function S(c){t(o)&&(isNaN(t(o).duration)||(c<t(n).start_progress?t(n).progress=t(n).start_progress:c>t(n).end_progress&&(t(n).progress=t(n).end_progress),t(o).currentTime=c*t(o).duration))}function E(){t(o)&&(t(n).duration=t(o).duration)}function F(c){t(o)&&(t(l)||(t(n).progress=t(o).currentTime/t(o).duration,t(n).current_time=t(o).currentTime,t(n).progress<t(n).start_progress-.01?t(o).currentTime=t(n).start_progress*t(o).duration:t(n).progress>t(n).end_progress&&(t(o).loop?t(o).currentTime=t(n).start_progress*t(o).duration:(t(o).pause(),t(o).currentTime=t(n).end_progress*t(o).duration))))}function P(){g(l,!1),t(o)&&(t(o).currentTime=t(n).progress*t(o).duration)}async function X(){s.reset(),g(u,"loading"),s.log("Splitting audio and video...");const c=d.get_instance();if(!c){s.error("FFmpeg instance is not available.");return}if(!t(r)){s.error("No file selected.");return}const M=await mt(c,{name:t(r).name,blob:t(r)},{output_format:"ogg",trim:{start:t(n).start_progress*t(n).duration,end:t(n).end_progress*t(n).duration},crop:ke()},s,"audio").catch(k=>(s.error(k.message),null));if(!M){s.error("Failed to extract audio from video file.");return}g(h,{name:"sound.ogg",blob:M},!0);const N=ke();N&&(t(i).crop=N);const b=await mt(c,{name:t(r).name,blob:t(r)},{...t(i),trim:{start:t(n).start_progress*t(n).duration,end:t(n).end_progress*t(n).duration},crop:ke()},s,"video").catch(k=>(s.error(k.message),null));if(!b){s.error("Failed to process video file.");return}const R=t(r).name.replace(/\.[^/.]+$/,"");g(v,{name:R,blob:b},!0),s.log("Audio and video split successfully."),s.log(`Final video: ${t(v).name} (${t(v).blob.size} bytes)`),g(u,"finished")}function q(){try{return new URL(t(w)),`${t(v).name}[sound=${encodeURIComponent(t(w))}].${t(i).output_format}`}catch{return`${t(v).name}.${t(i).output_format}`}}var D=Da(),W=U(D);bt(W,{accept_image:!1,show_preview:!1,get current_file(){return t(r)},set current_file(c){g(r,c,!0)}});var Y=m(W,2);{var V=c=>{var M=G(),N=U(M);{var b=k=>{var A=Sa(),C=U(A),J=_(C),re=_(J);De(re,ee=>g(o,ee),()=>t(o));var ve=m(re,2);Ir(ve,{get video(){return t(o)}}),f(J);var _e=m(J,2),me=_(_e);lr(me,{get video_data(){return t(n)},on_seek:S,on_start_seek:x,on_end_seek:y,on_release:P});var pe=m(me,2);Sr(pe,{get video(){return t(o)},get video_data(){return t(n)}}),f(_e),f(C);var be=m(C,2);{var xe=ee=>{var ae=Ma(),ge=_(ae),Ee=_(ge);_r(Ee,{}),Re(),f(ge),f(ae),p(ee,ae)};j(be,ee=>{(ke().width>2048||ke().height>2048)&&ee(xe)})}var we=m(be,2);Pr(we,{get video_data(){return t(n)},get export_settings(){return t(i)}});var Ae=m(we,2);kt(Ae,{get file_name(){return t(r).name},get export_settings(){return t(i)},set export_settings(ee){g(i,ee,!0)}});var Ce=m(Ae,2);Ce.__click=[La,X],z(ee=>$(re,"src",ee),[()=>URL.createObjectURL(t(r))]),ne("durationchange",re,E),ne("resize",re,onresize),p(k,A)},R=k=>{var A=Ia(),C=U(A);yt(C,{get message_manager(){return s},get ffmpeg_manager(){return d}});var J=m(C,2);{var re=ve=>{var _e=Fa(),me=m(_(_e),2),pe=m(me,2),be=m(_(pe),2);Fe(be),f(pe);var xe=m(pe,4),we=m(xe,2);{var Ae=ae=>{var ge=Na(),Ee=m(_(ge),2),Se=_(Ee);Fe(Se);var St=m(Se,2);St.__click=[Oa,q],f(Ee),f(ge),z(Ot=>$t(Se,Ot),[q]),p(ae,ge)};j(we,ae=>{t(w)!=""&&ae(Ae)})}var Ce=m(we,2),ee=_(Ce);f(Ce),f(_e),z((ae,ge,Ee,Se)=>{$(me,"src",ae),$(xe,"src",ge),$(ee,"href",Ee),$(ee,"download",Se)},[()=>URL.createObjectURL(t(h).blob),()=>URL.createObjectURL(t(v).blob),()=>URL.createObjectURL(t(v).blob),q]),pt(be,()=>t(w),ae=>g(w,ae)),p(ve,_e)};j(J,ve=>{t(u)==="finished"&&ve(re)})}p(k,A)};j(N,k=>{t(u)==="ready"?k(b):k(R,!1)})}p(c,M)},K=c=>{var M=Ua();p(c,M)};j(Y,c=>{t(r)?c(V):c(K,!1)})}p(a,D),T()}ye(["click"]);var Ca=O("<video controls><source/> Your browser does not support the video tag.</video>",2),Ba=O('<img alt="Selected image"/>'),Ta=O('<div class="flash bd-muted"><p><b>Preview</b></p> <p><code> </code></p> <!></div>');function ht(a,e){B(e,!0);var r=G(),o=U(r);{var n=l=>{var s=Ta(),d=m(_(s),2),u=_(d),i=_(u);f(u),f(d);var v=m(d,2);{var h=x=>{var y=Ca(),S=_(y);Re(),f(y),z(E=>{$(S,"src",E),$(S,"type",e.current_file.type)},[()=>URL.createObjectURL(e.current_file)]),p(x,y)},w=x=>{var y=G(),S=U(y);{var E=F=>{var P=Ba();z(X=>$(P,"src",X),[()=>URL.createObjectURL(e.current_file)]),p(F,P)};j(S,F=>{Ve(e.current_file.name)==="image"&&F(E)},!0)}p(x,y)};j(v,x=>{Ve(e.current_file.name)==="video"?x(h):x(w,!1)})}f(s),z(x=>H(i,`Original size: ${x??""}`),[()=>Le(e.current_file.size,{units:"iec"})]),p(l,s)};j(o,l=>{e.current_file&&l(n)})}p(a,r),T()}async function Pa(a,e){const r=await fetch(a);if(!r.ok)throw new Error(`Failed to download file: ${r.statusText}`);const o=r.headers.get("Content-Length");if(!o)throw new Error("Unable to determine file size for progress tracking.");const n=parseInt(o,10);let l=0;const s=r.body?.getReader(),d=[];if(!s)throw new Error("Failed to read response body.");for(;;){const{done:i,value:v}=await s.read();if(i)break;if(v){d.push(v),l+=v.length;const h=l/n*100;e(h)}}return new Blob(d)}async function Wa(a,e,r,o,n){n.log("Merging video and audio..."),n.log("Writing input files to ffmpeg..."),await a.writeFile(e.name,await Ge(e.blob)),await a.writeFile(r.name,await Ge(r.blob));const l=Lt(o,e,r);n.log("ffmpeg "+l.join(" ")),await a.exec(l),n.bump_ffmpeg_process_id(),n.log("Reading output...");const d=await a.readFile(`output.${o.output_format}`);return new Blob([d],{type:`video/${o.output_format}`})}var za=(a,e)=>e(),ja=O('<!> <div><!> <button type="submit">Merge</button></div>',1),Xa=O('<div class="flash bd-accent"><p><b>Output</b></p> <p><code> </code></p> <video controls></video> <p class="centered"><a><button>Download</button></a></p></div>',2),Va=O("<!> <!>",1),Ga=O('<p class="flash danger icon"><!> Cannot find sound URL / invalid sound URL in file <code class="bd-danger"> </code>.</p> <!>',1),Ya=O(`<div class="flash bg-muted bd-muted"><p><b>Instructions</b></p> <p>Upload a video file containing a [sound=URL] link in the filename.<br/> Example: <code>video[sound=https://example.com/sound.mp3].webm</code><br/> This tool
			downloads the linked sound file and merges it back into the video file using ffmpeg-wasm,
			entirely client-side<br/> This is useful for archival in case the file host goes down, or just to view the combined file
			locally.</p></div>`),Ha=O("<!> <!>",1);function Za(a,e){B(e,!0);let r=L(te(new Blob));const o=new Rt,n=new Mt;let l=L("ready"),s=L(null),d=L(te({output_format:"mp4",settings:{preset:"fast",tune:"none",bitrate:2048},crop:{enabled:!1,x:0,y:0,width:0,height:0}}));Ze(()=>{n.init()}),ce(()=>{t(s)&&u()});function u(){g(r,new Blob,!0),o.reset(),g(l,"ready")}async function i(){if(!t(s)){o.error("No file selected for merging.");return}g(l,"loading");const E=await v(t(s).name);if(!E||!E.blob){o.error("Failed to download sound from file name.");return}let F={name:t(s).name,blob:t(s)};const P=n.get_instance();if(!P){o.error("FFmpeg instance is not available.");return}try{g(r,await Wa(P,F,E,t(d),o),!0)}catch(X){o.error(`FFmpeg error: ${X}`);return}g(l,"finished")}async function v(E){const F=_t(E);if(!F)return o.error("Invalid sound URL."),null;try{return{blob:await Pa(F,q=>{o.log(`Downloading sound... ${q.toFixed(2)}%`,"download_sound")}),name:`${encodeURIComponent(F)}`}}catch(P){return o.error(`Failed to download sound: ${P}`),null}}var h=Ha(),w=U(h);bt(w,{get current_file(){return t(s)},set current_file(E){g(s,E,!0)}});var x=m(w,2);{var y=E=>{var F=G(),P=U(F);{var X=D=>{var W=G(),Y=U(W);{var V=c=>{var M=ja(),N=U(M);ht(N,{get current_file(){return t(s)}});var b=m(N,2),R=_(b);kt(R,{get file_name(){return t(s).name},get export_settings(){return t(d)},set export_settings(A){g(d,A,!0)}});var k=m(R,2);k.__click=[za,i],f(b),p(c,M)},K=c=>{var M=Va(),N=U(M);yt(N,{get message_manager(){return o},get ffmpeg_manager(){return n}});var b=m(N,2);{var R=k=>{var A=Xa(),C=m(_(A),2),J=_(C),re=_(J);f(J),f(C);var ve=m(C,2),_e=m(ve,2),me=_(_e);f(_e),f(A),z((pe,be,xe,we)=>{H(re,`Final size: ${pe??""}`),$(ve,"src",be),$(me,"href",xe),$(me,"download",`${we??""}.webm`)},[()=>Le(t(r).size,{units:"iec"}),()=>URL.createObjectURL(t(r)),()=>URL.createObjectURL(t(r)),()=>Zr(t(s).name)]),p(k,A)};j(b,k=>{t(l)==="finished"&&k(R)})}p(c,M)};j(Y,c=>{t(l)==="ready"?c(V):c(K,!1)})}p(D,W)},q=D=>{var W=Ga(),Y=U(W),V=_(Y);ur(V,{});var K=m(V,2),c=_(K,!0);f(K),Re(),f(Y);var M=m(Y,2);ht(M,{get current_file(){return t(s)}}),z(()=>H(c,t(s).name)),p(D,W)};j(P,D=>{_t(t(s).name)?D(X):D(q,!1)})}p(E,F)},S=E=>{var F=Ya();p(E,F)};j(x,E=>{t(s)?E(y):E(S,!1)})}p(a,h),T()}ye(["click"]);let Be=L(te({open:!1,title:"",content:"",on_close:void 0}));var qa=(a,e)=>t(e).on_close?.(),Ka=O('<dialog class="svelte-1dld0ml"><header><h2> </h2></header> <p> </p> <footer><form method="dialog"><button type="submit">Close</button></form></footer></dialog>');function Ja(a,e){B(e,!0);let r=L(null);ce(()=>{t(r)&&t(Be).open&&t(r).showModal()});var o=Ka(),n=_(o),l=_(n),s=_(l,!0);f(l),f(n);var d=m(n,2),u=_(d,!0);f(d);var i=m(d,2),v=_(i),h=_(v);h.__click=[qa,Be],f(v),f(i),f(o),De(o,w=>g(r,w),()=>t(r)),z(()=>{H(s,t(Be).title),H(u,t(Be).content)}),p(a,o),T()}ye(["click"]);var Qa=(a,e,r)=>g(e,t(r).name,!0),$a=O("<li> </li>"),eo=O('<header class="my-4"><h3>Soundpost Tools</h3> <small>Utilities compatible with <a href="https://github.com/rcc11/4chan-sounds-player">4chan Sounds Player</a>, <a href="https://sleazyfork.org/en/scripts/31045-4chan-external-sounds">4chan External Sounds</a>, etc.</small></header> <main><menu></menu> <!> <!></main>',1);function io(a){const e=[{name:"splitter",component:Aa,label:"Soundpost Maker"},{name:"merger",component:Za,label:"Soundpost Merger"}];let r=L("splitter");var o=eo(),n=m(U(o),2),l=_(n);Me(l,21,()=>e,Ue,(u,i)=>{var v=$a();v.__click=[Qa,r,i];let h;var w=_(v,!0);f(v),z(x=>{h=Ie(v,1,"",null,h,x),H(w,t(i).label)},[()=>({selected:t(r)===t(i).name})]),p(u,v)}),f(l);var s=m(l,2);Me(s,17,()=>e,u=>u.name,(u,i)=>{var v=G(),h=U(v);{var w=x=>{var y=G(),S=U(y);Kt(S,()=>t(i).component,(E,F)=>{F(E,{})}),p(x,y)};j(h,x=>{t(r)===t(i).name&&x(w)})}p(u,v)});var d=m(s,2);Ja(d,{}),f(n),p(a,o)}ye(["click"]);export{io as component};
