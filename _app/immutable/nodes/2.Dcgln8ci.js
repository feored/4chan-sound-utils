import"../chunks/DsnmJJEf.js";import{x as te,y as Ke,M as ze,b7 as Nt,z as Ft,E as It,G as Ut,b8 as Dt,aV as At,b9 as Bt,ak as Ct,F as Tt,D as Je,C as Qe,a0 as Pt,ba as $e,L as Wt,K as zt,av as jt,aD as Te,r as Pe,aC as Xt,N as Vt,q as et,bb as Gt,I as Oe,u as bt,bc as Yt,p as C,b as ue,g as t,ae as S,k as N,o as _,v as b,s as f,t as P,ah as pe,m as p,n as T,V as g,aN as ye,b6 as ne,bd as Ce,w as Y,be as Ht,ag as G,l as I,bf as se,P as le,bg as Zt,_ as re,ad as Ze,bh as be}from"../chunks/D4KbEBlY.js";import{p as ie,i as j,r as de,b as fe,c as qt}from"../chunks/CJXYB7lu.js";import{f as tt,c as rt,g as $,s as Fe,d as Kt,h as at,e as Me,i as Ie,j as Jt,r as Be,k as ot,l as nt}from"../chunks/D9XZEmWM.js";import{b as Ue}from"../chunks/C_PBsP8N.js";function Qt(a,e,r,o,n,l){let s=te;te&&Ke();var d,u,i=null;te&&ze.nodeType===Nt&&(i=ze,Ke());var v=te?ze:a,m,w=rt;Ft(()=>{const x=e()||null;var y=Dt;if(x!==d){var O=rt;tt(w),m&&(x===null?Wt(m,()=>{m=null,u=null}):x===u?zt(m):(jt(m),$e(!1))),x&&x!==u&&(m=Ut(()=>{if(i=te?i:document.createElementNS(y,x),At(i,i),o){te&&Bt(x)&&i.append(document.createComment(""));var k=te?Ct(i):i.appendChild(Tt());te&&(k===null?Je(!1):Qe(k)),o(i,k)}Pt.nodes_end=i,v.before(i)})),d=x,d&&(u=d),$e(!0),tt(O)}},It),s&&(Je(!0),Qe(v))}function $t(a,e,r=e){var o=Gt(),n=new WeakSet;Te(a,"input",l=>{var s=l?a.defaultValue:a.value;if(s=Xe(a)?Ve(s):s,r(s),Oe!==null&&n.add(Oe),o&&s!==(s=e())){var d=a.selectionStart,u=a.selectionEnd;a.value=s??"",u!==null&&(a.selectionStart=d,a.selectionEnd=Math.min(u,a.value.length))}}),(te&&a.defaultValue!==a.value||bt(e)==null&&a.value)&&(r(Xe(a)?Ve(a.value):a.value),Oe!==null&&n.add(Oe)),Pe(()=>{var l=e();if(a===document.activeElement){var s=Yt??Oe;if(n.has(s))return}Xe(a)&&l===Ve(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}const je=new Set;function it(a,e,r,o,n=o){var l=r.getAttribute("type")==="checkbox",s=a;let d=!1;if(e!==null)for(var u of e)s=s[u]??=[];s.push(r),Te(r,"change",()=>{var i=r.__value;l&&(i=st(s,i,r.checked)),n(i)},()=>n(l?[]:null)),Pe(()=>{var i=o();if(te&&r.defaultChecked!==r.checked){d=!0;return}l?(i=i||[],r.checked=i.includes(r.__value)):r.checked=Xt(r.__value,i)}),Vt(()=>{var i=s.indexOf(r);i!==-1&&s.splice(i,1)}),je.has(s)||(je.add(s),et(()=>{s.sort((i,v)=>i.compareDocumentPosition(v)===4?-1:1),je.delete(s)})),et(()=>{if(d){var i;if(l)i=st(s,i,r.checked);else{var v=s.find(m=>m.checked);i=v?.__value}n(i)}})}function er(a,e,r=e){Te(a,"change",o=>{var n=o?a.defaultChecked:a.checked;r(n)}),(te&&a.defaultChecked!==a.checked||bt(e)==null)&&r(a.checked),Pe(()=>{var o=e();a.checked=!!o})}function st(a,e,r){for(var o=new Set,n=0;n<a.length;n+=1)a[n].checked&&o.add(a[n].__value);return r||o.delete(e),Array.from(o)}function Xe(a){var e=a.type;return e==="number"||e==="range"}function Ve(a){return a===""?null:+a}function tr(a,e,r=e){Te(a,"change",()=>{r(a.files)}),te&&a.files&&r(a.files),Pe(()=>{a.files=e()})}var rr=N('<div><div class="flash bd-muted bg-accent"><label for="source_media" style="font-weight:bold;">Upload a video or image</label> <input id="source_media" name="source_media" type="file"/></div></div>');function wt(a,e){C(e,!0);const r=["video/mp4","video/webm"],o=["image/jpeg","image/png","image/gif"];let n=ie(e,"current_file",15),l=ie(e,"accept_video",3,!0),s=ie(e,"accept_image",3,!0),d=pe(()=>{const w=[];return l()&&w.push(...r),s()&&w.push(...o),w}),u=S(null);ue(()=>{t(u)&&t(u).length>0?n(t(u)[0]):n(null)});var i=rr(),v=_(i),m=b(_(v),2);f(v),f(i),P(w=>$(m,"accept",w),[()=>t(d).join(",")]),tr(m,()=>t(u),w=>g(u,w)),p(a,i),T()}function q(a,e=!0){const r=Math.floor(a/3600).toString().padStart(2,"0"),o=Math.floor(a%3600/60).toString().padStart(2,"0"),n=Math.floor(a%60).toString().padStart(2,"0"),l=Math.floor(a%1*1e3).toString().padStart(3,"0"),s=`${o}:${n}.${l}`;return e?`${r}:${s}`:s}function ar(a,e,r=1e-4){return Math.abs(a-e)<r}function lt(a,e){g(e,!0),document.body.style.cursor="ew-resize"}function or(a,e,r,o,n){if(!t(e)||!t(r)||!o.seekbar)return;const l=o.seekbar.getBoundingClientRect();let d=(a.touches[0].clientX-l.left)/(l.width-t(r).getBoundingClientRect().width);n(Math.max(0,Math.min(1,d))),o.seek_type==="handle"?o.on_seek?.(n()):o.on_seek?.(n(),!0)}var nr=N('<div class="p-.5 timer-display timer-text flash default unselectable svelte-wan5yw"> </div>'),ir=N("<div><!></div>");function Ge(a,e){C(e,!0);let r=ie(e,"progress",7),o=S(!1),n=S(!1),l=S(null);function s(){!t(o)||!t(l)||!e.seekbar||(g(o,!1),document.body.style.cursor="auto",e.on_release?.())}function d(y){if(!t(o)||!t(l)||!e.seekbar)return;const O=e.seekbar.getBoundingClientRect();let k=(y.clientX-O.left)/(O.width-t(l).getBoundingClientRect().width);r(Math.max(0,Math.min(1,k))),e.seek_type==="handle"?e.on_seek?.(r()):e.on_seek?.(r(),!0)}function u(){if(!t(l)||!e.seekbar)return"0%";const y=e.seekbar.getBoundingClientRect();let O=(y.width-t(l).getBoundingClientRect().width)/y.width;return e.seek_type==="handle"||e.seek_type==="right_bracket"?`${r()*100*O}%`:`${r()*100}%`}var i=ir();ne("mouseup",Ce,s),ne("mousemove",Ce,d);let v;i.__touchstart=[lt,o],i.__touchend=s,i.__touchmove=[or,o,l,e,r],i.__mousedown=[lt,o],i.__mousemove=d;let m;var w=_(i);{var x=y=>{var O=nr(),k=_(O,!0);f(O),P(F=>Y(k,F),[()=>q(r()*e.duration,!1)]),p(y,O)};j(w,y=>{(t(n)||t(o))&&y(x)})}f(i),Ue(i,y=>g(l,y),()=>t(l)),P((y,O)=>{v=Fe(i,1,`draggable ${e.seek_type??""} unselectable`,"svelte-wan5yw",v,y),m=Kt(i,"",m,O)},[()=>({"z-index-100":t(n)||t(o)}),()=>({left:u()})]),ne("touchcancel",i,s),ne("mouseenter",i,()=>g(n,!0)),ne("mouseleave",i,()=>g(n,!1)),p(a,i),T()}ye(["touchstart","touchend","touchmove","mousedown","mousemove"]);var sr=N('<div class="parent svelte-hswmh"><div class="seekbar svelte-hswmh"><!> <!> <!></div></div>');function lr(a,e){C(e,!0);let r=S(null);var o=sr(),n=_(o),l=_(n);{let u=pe(()=>e.video_data.start_progress??0);Ge(l,{get progress(){return t(u)},seek_type:"left_bracket",get seekbar(){return t(r)},get on_seek(){return e.on_start_seek},get duration(){return e.video_data.duration},get on_release(){return e.on_release}})}var s=b(l,2);{let u=pe(()=>e.video_data.end_progress??100);Ge(s,{get progress(){return t(u)},seek_type:"right_bracket",get seekbar(){return t(r)},get on_seek(){return e.on_end_seek},get duration(){return e.video_data.duration},get on_release(){return e.on_release}})}var d=b(s,2);{let u=pe(()=>e.video_data.progress??0);Ge(d,{get progress(){return t(u)},seek_type:"handle",get seekbar(){return t(r)},get on_seek(){return e.on_seek},get duration(){return e.video_data.duration}})}f(n),Ue(n,u=>g(r,u),()=>t(r)),f(o),p(a,o),T()}/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const dr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var cr=Ht("<svg><!><!></svg>");function _e(a,e){C(e,!0);const r=ie(e,"color",3,"currentColor"),o=ie(e,"size",3,24),n=ie(e,"strokeWidth",3,2),l=ie(e,"absoluteStrokeWidth",3,!1),s=ie(e,"iconNode",19,()=>[]),d=de(e,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var u=cr();at(u,m=>({...dr,...d,width:o(),height:o(),stroke:r(),"stroke-width":m,class:["lucide-icon lucide",e.name&&`lucide-${e.name}`,e.class]}),[()=>l()?Number(n())*24/Number(o()):n()]);var i=_(u);Me(i,17,s,Ie,(m,w)=>{var x=pe(()=>Zt(t(w),2));let y=()=>t(x)[0],O=()=>t(x)[1];var k=G(),F=I(k);Qt(F,y,!0,(W,X)=>{at(W,()=>({...O()}))}),p(m,k)});var v=b(i);se(v,()=>e.children??le),f(u),p(a,u),T()}function ur(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];_e(a,fe({name:"circle-alert"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function fr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];_e(a,fe({name:"infinity"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function _r(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];_e(a,fe({name:"info"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function vr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1"}]];_e(a,fe({name:"pause"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function mr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];_e(a,fe({name:"play"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function hr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"m17 2 4 4-4 4"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}],["path",{d:"m7 22-4-4 4-4"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3"}],["path",{d:"M11 10h1v4"}]];_e(a,fe({name:"repeat-1"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function gr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];_e(a,fe({name:"square"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function pr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]];_e(a,fe({name:"volume-2"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function br(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M16 9a5 5 0 0 1 .95 2.293"}],["path",{d:"M19.364 5.636a9 9 0 0 1 1.889 9.96"}],["path",{d:"m2 2 20 20"}],["path",{d:"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11"}],["path",{d:"M9.828 4.172A.686.686 0 0 1 11 4.657v.686"}]];_e(a,fe({name:"volume-off"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function dt(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=de(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];_e(a,fe({name:"x"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=G(),d=I(s);se(d,()=>e.children??le),p(n,s)},$$slots:{default:!0}})),T()}function wr(a,e,r){e()&&(e().pause(),r())}function yr(a,e,r,o){e()&&((e().ended||ar(r.video_data.progress,r.video_data.end_progress))&&o(),e().play())}var xr=(a,e)=>e()?.pause(),kr=N('<button class="bd-accent svelte-m6aj9m"><!></button>'),Er=N('<button class="svelte-m6aj9m"><!></button>'),Rr=(a,e)=>g(e,!t(e)),Mr=(a,e)=>g(e,!t(e)),Lr=N('<div class="controls-container svelte-m6aj9m"><div class="controls svelte-m6aj9m"><!> <button class="svelte-m6aj9m"><!></button> <div class="timer-text flash accent svelte-m6aj9m"> </div> <div class="timer-text flash attention svelte-m6aj9m"> </div></div> <div class="controls svelte-m6aj9m"><button><!></button> <button><!></button></div></div>');function Sr(a,e){C(e,!0);let r=ie(e,"video",7);ue(()=>{r()&&(r().addEventListener("play",()=>g(o,!0)),r().addEventListener("pause",()=>g(o,!1)),r().addEventListener("ended",()=>g(o,!1)),r().addEventListener("loadstart",()=>g(o,!1)))});let o=S(!1),n=S(!0),l=S(!0);function s(){!r()||!e.video_data||(r().currentTime=e.video_data.start_progress*e.video_data.duration)}ue(()=>{r()&&(r().loop=t(n),r().muted=!t(l))});var d=Lr(),u=_(d),i=_(u);{var v=h=>{var M=kr();M.__click=[xr,r];var R=_(M);vr(R,{}),f(M),p(h,M)},m=h=>{var M=Er();M.__click=[yr,r,e,s];var R=_(M);mr(R,{}),f(M),p(h,M)};j(i,h=>{t(o)?h(v):h(m,!1)})}var w=b(i,2);w.__click=[wr,r,s];var x=_(w);gr(x,{}),f(w);var y=b(w,2),O=_(y);f(y);var k=b(y,2),F=_(k);f(k),f(u);var W=b(u,2),X=_(W);X.__click=[Rr,n];let ee;var A=_(X);{var z=h=>{fr(h,{})},H=h=>{hr(h,{})};j(A,h=>{t(n)?h(z):h(H,!1)})}f(X);var V=b(X,2);V.__click=[Mr,l];let K;var c=_(V);{var E=h=>{pr(h,{})},L=h=>{br(h,{})};j(c,h=>{t(l)?h(E):h(L,!1)})}f(V),f(W),f(d),P((h,M,R,U,B,J,ae)=>{Y(O,`${h??""} / ${M??""}`),Y(F,`[${R??""} : ${U??""}] (${B??""})`),ee=Fe(X,1,"svelte-m6aj9m",null,ee,J),K=Fe(V,1,"svelte-m6aj9m",null,K,ae)},[()=>q(e.video_data.current_time,!1),()=>q(e.video_data.duration,!1),()=>q(e.video_data.start_progress*e.video_data.duration,!1),()=>q(e.video_data.end_progress*e.video_data.duration,!1),()=>q((e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration,!1),()=>({"bd-accent":t(n)}),()=>({"bd-accent":t(l)})]),p(a,d),T()}ye(["click"]);const ct=["NW","N","NE","W","E","SW","S","SE"],Or="#000000E6",Q=12,ut=64;function Re(){return{enabled:t(yt),x:t(Ne)?.origin.x||0,y:t(Ne)?.origin.y||0,width:t(Ne)?.width||0,height:t(Ne)?.height||0}}let Ne=S(null),yt=S(!1);function Nr(a,e,r,o,n,l){if(!t(e))return;const s=t(e).getBoundingClientRect(),d=a.clientX-s.left,u=a.clientY-s.top,i=r({x:d,y:u});if(i){i==="surface"?(t(e).style.cursor="move",g(o,{x:d,y:u},!0)):t(e).style.cursor=`${i}-resize`,g(n,!0),g(l,i,!0);return}}var Fr=N('<canvas class="svelte-1frae8d"></canvas> <div><code> </code></div>',1);function Ir(a,e){C(e,!0);let r=S(null),o=S(re({width:0,height:0})),n=S(re({width:0,height:0})),l=S(!1),s=S(!1),d=S(re({x:0,y:0})),u=S("NW"),i=S(re({p0:{x:0,y:0},p1:{x:t(o).width,y:t(o).height}}));Ze(()=>{window.addEventListener("resize",m)}),ue(()=>{e.video&&e.video.addEventListener("loadedmetadata",m)}),ue(()=>{g(Ne,t(v),!0),g(yt,t(v).width<t(n).width||t(v).height<t(n).height,!0)});let v=pe(()=>{if(!t(r)||!e.video)return{origin:{x:0,y:0},width:0,height:0};const c=e.video.videoWidth/e.video.offsetWidth,E=Math.min(Math.round((t(i).p1.x-t(i).p0.x)*c),t(n).width),L=Math.min(Math.round((t(i).p1.y-t(i).p0.y)*c),t(n).height);return{origin:{x:Math.round(t(i).p0.x*c),y:Math.round(t(i).p0.y*c)},width:E,height:L}});function m(){!t(r)||!e.video||(g(o,{width:e.video.offsetWidth,height:e.video.offsetHeight},!0),g(n,{width:e.video.videoWidth,height:e.video.videoHeight},!0),g(i,{p0:{x:0,y:0},p1:{x:t(o).width,y:t(o).height}},!0))}function w(){if(!t(r))return;const c=t(r).getContext("2d");c&&(c.clearRect(0,0,t(o).width,t(o).height),x(c),t(s)&&(y(c),O(c)))}function x(c){c.fillStyle=Or,c.fillRect(0,0,t(i).p0.x,t(i).p0.y),c.fillRect(t(i).p0.x,0,t(i).p1.x-t(i).p0.x,t(i).p0.y),c.fillRect(t(i).p1.x,0,t(o).width-t(i).p1.x,t(i).p0.y),c.fillRect(0,t(i).p0.y,t(i).p0.x,t(i).p1.y-t(i).p0.y),c.fillRect(t(i).p1.x,t(i).p0.y,t(o).width-t(i).p1.x,t(i).p1.y-t(i).p0.y),c.fillRect(0,t(i).p1.y,t(i).p0.x,t(o).height-t(i).p1.y),c.fillRect(t(i).p0.x,t(i).p1.y,t(i).p1.x-t(i).p0.x,t(o).height-t(i).p1.y),c.fillRect(t(i).p1.x,t(i).p1.y,t(o).width-t(i).p1.x,t(o).height-t(i).p1.y)}function y(c){c.strokeStyle="#FFF",c.lineWidth=2,c.strokeRect(t(i).p0.x,t(i).p0.y,t(i).p1.x-t(i).p0.x,t(i).p1.y-t(i).p0.y),c.strokeStyle="#111",c.lineWidth=2,c.strokeRect(t(i).p0.x+2,t(i).p0.y+2,t(i).p1.x-t(i).p0.x-4,t(i).p1.y-t(i).p0.y-4)}function O(c){if(!t(r))return;c.fillStyle="#FFF",c.strokeStyle="#111",c.lineWidth=1;const E=k();for(const L of ct){const h=E[L];c.fillRect(h.x,h.y,Q,Q),c.strokeRect(h.x,h.y,Q,Q)}}ue(()=>{!t(r)||!t(r).getContext("2d")||w()});function k(){const c=t(i).p1.x-t(i).p0.x,E=t(i).p1.y-t(i).p0.y,L=t(i).p0.x+c/2-Q/2,h=t(i).p0.y+E/2-Q/2;return{NW:{x:t(i).p0.x,y:t(i).p0.y},N:{x:L,y:t(i).p0.y},NE:{x:t(i).p1.x-Q,y:t(i).p0.y},W:{x:t(i).p0.x,y:h},E:{x:t(i).p1.x-Q,y:h},SW:{x:t(i).p0.x,y:t(i).p1.y-Q},S:{x:L,y:t(i).p1.y-Q},SE:{x:t(i).p1.x-Q,y:t(i).p1.y-Q}}}function F({x:c,y:E}){const L=k();for(const h of ct){const M=L[h];if(c>=M.x&&c<=M.x+Q&&E>=M.y&&E<=M.y+Q)return h}return c>=t(i).p0.x&&c<=t(i).p1.x&&E>=t(i).p0.y&&E<=t(i).p1.y?"surface":null}function W(c){!t(r)||!t(l)||(t(r).style.cursor="auto",g(l,!1))}function X(c){if(!t(r))return;if(!t(l)){const R=t(r).getBoundingClientRect(),U=c.clientX-R.left,B=c.clientY-R.top,J=F({x:U,y:B});J?J==="surface"?(t(r).style.cursor="move",g(s,!0)):(t(r).style.cursor=`${J}-resize`,g(s,!1)):(t(r).style.cursor="auto",g(s,!1));return}const E=t(r).getBoundingClientRect(),L=c.clientX-E.left,h=c.clientY-E.top;if(t(u)==="surface"){const R=L-t(d).x,U=h-t(d).y,B={p0:{x:t(i).p0.x+R,y:t(i).p0.y+U},p1:{x:t(i).p1.x+R,y:t(i).p1.y+U}};B.p0.x>0&&B.p1.x<t(o).width&&(t(i).p0.x=B.p0.x,t(i).p1.x=B.p1.x),B.p0.y>0&&B.p1.y<t(o).height&&(t(i).p0.y=B.p0.y,t(i).p1.y=B.p1.y),g(d,{x:L,y:h},!0)}else{let R={p0:{...t(i).p0},p1:{...t(i).p1}};t(u).includes("N")?R.p0.y=Math.max(0,Math.min(t(i).p1.y,h)):t(u).includes("S")&&(R.p1.y=Math.min(t(o).height,Math.max(t(i).p0.y,h))),R.p1.y-R.p0.y>=ut&&(t(i).p0.y=R.p0.y,t(i).p1.y=R.p1.y),t(u).includes("W")?R.p0.x=Math.max(0,Math.min(t(i).p1.x,L)):t(u).includes("E")&&(R.p1.x=Math.min(t(o).width,Math.max(t(i).p0.x,L))),R.p1.x-R.p0.x>=ut&&(t(i).p0.x=R.p0.x,t(i).p1.x=R.p1.x)}t(r).getContext("2d")&&w()}function ee(){t(l)||g(s,!1)}var A=Fr();ne("mouseup",Ce,W),ne("mousemove",Ce,X);var z=I(A);z.__mousedown=[Nr,r,F,d,l,u],Ue(z,c=>g(r,c),()=>t(r));var H=b(z,2),V=_(H),K=_(V);f(V),f(H),P(()=>{$(z,"width",t(o).width),$(z,"height",t(o).height),Y(K,`Cropped: ${t(v).width??""} x ${t(v).height??""} - Original: ${t(n).width??""} x ${t(n).height??""}`)}),ne("mouseenter",z,onmouseenter),ne("mouseleave",z,ee),p(a,A),T()}ye(["mousedown"]);var Ur=N("<li> </li>"),Dr=N('<div class="flash muted"><ul><p><b>Log</b></p> <!></ul></div>');function xt(a,e){C(e,!0);const r=()=>(e.ffmpeg_manager.is_loaded()&&e.message_manager.toggle_ffmpeg_listen(!0,e.ffmpeg_manager),()=>{e.message_manager.toggle_ffmpeg_listen(!1,e.ffmpeg_manager)});var o=Dr(),n=_(o),l=b(_(n),2);Me(l,17,()=>Object.values(e.message_manager.messages),Ie,(s,d)=>{var u=Ur();let i;var v=_(u,!0);f(u),P(m=>{i=Fe(u,1,"svelte-w19oiv",null,i,m),Y(v,t(d).message)},[()=>({error:t(d).error})]),p(s,u)}),f(n),f(o),Jt(o,()=>r),p(a,o),T()}let kt={};const ft=new WeakMap,_t={metric:[{from:0,to:1e3,unit:"B",long:"bytes"},{from:1e3,to:1e6,unit:"kB",long:"kilobytes"},{from:1e6,to:1e9,unit:"MB",long:"megabytes"},{from:1e9,to:1e12,unit:"GB",long:"gigabytes"},{from:1e12,to:1e15,unit:"TB",long:"terabytes"},{from:1e15,to:1e18,unit:"PB",long:"petabytes"},{from:1e18,to:1e21,unit:"EB",long:"exabytes"},{from:1e21,to:1e24,unit:"ZB",long:"zettabytes"},{from:1e24,to:1e27,unit:"YB",long:"yottabytes"}],metric_octet:[{from:0,to:1e3,unit:"o",long:"octets"},{from:1e3,to:1e6,unit:"ko",long:"kilooctets"},{from:1e6,to:1e9,unit:"Mo",long:"megaoctets"},{from:1e9,to:1e12,unit:"Go",long:"gigaoctets"},{from:1e12,to:1e15,unit:"To",long:"teraoctets"},{from:1e15,to:1e18,unit:"Po",long:"petaoctets"},{from:1e18,to:1e21,unit:"Eo",long:"exaoctets"},{from:1e21,to:1e24,unit:"Zo",long:"zettaoctets"},{from:1e24,to:1e27,unit:"Yo",long:"yottaoctets"}],iec:[{from:0,to:Math.pow(1024,1),unit:"B",long:"bytes"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"KiB",long:"kibibytes"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"MiB",long:"mebibytes"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"GiB",long:"gibibytes"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"TiB",long:"tebibytes"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"PiB",long:"pebibytes"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"EiB",long:"exbibytes"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"ZiB",long:"zebibytes"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"YiB",long:"yobibytes"}],iec_octet:[{from:0,to:Math.pow(1024,1),unit:"o",long:"octets"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"Kio",long:"kibioctets"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"Mio",long:"mebioctets"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"Gio",long:"gibioctets"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"Tio",long:"tebioctets"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"Pio",long:"pebioctets"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"Eio",long:"exbioctets"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"Zio",long:"zebioctets"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"Yio",long:"yobioctets"}]};class Ar{constructor(e,r){r=Object.assign({units:"metric",precision:1,locale:void 0},kt,r),ft.set(this,r),Object.assign(_t,r.customUnits);const o=e<0?"-":"";e=Math.abs(e);const n=_t[r.units];if(n){const l=n.find(s=>e>=s.from&&e<s.to);if(l){const s=new Intl.NumberFormat(r.locale,{style:"decimal",maximumFractionDigits:r.precision}),d=l.from===0?o+s.format(e):o+s.format(e/l.from);this.value=d,this.unit=l.unit,this.long=l.long}else this.value=o+e,this.unit="",this.long=""}else throw new Error(`Invalid units specified: ${r.units}`)}toString(){const e=ft.get(this);return e.toStringFn?e.toStringFn.bind(this)():`${this.value} ${this.unit}`}}function Le(a,e){return new Ar(a,e)}Le.defaultOptions=function(a){kt=a};var Br=N('<div class="flash danger"><p><!> </p></div>'),Cr=N(`<div class="flash danger"><p><!> Estimated file size too large: <code> </code>. Reduce either duration or
			bitrate.</p></div>`),Tr=N("<!> <!>",1);function Pr(a,e){C(e,!0);const r=120,o=4096*1024;let n=pe(()=>{if(!e.export_settings.settings||!e.export_settings.settings.bitrate)return 0;const v=e.export_settings.settings.bitrate;return(e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration*v*1e3/8});var l=Tr(),s=I(l);{var d=v=>{var m=Br(),w=_(m),x=_(w);dt(x,{style:"vertical-align:text-bottom;"});var y=b(x);f(w),f(m),P(O=>Y(y,` Duration too long: Current: ${O??""} seconds, Limit: 120 seconds`),[()=>((e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration).toFixed(2)]),p(v,m)};j(s,v=>{(e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration>r&&v(d)})}var u=b(s,2);{var i=v=>{var m=Cr(),w=_(m),x=_(w);dt(x,{style:"vertical-align:text-bottom;"});var y=b(x,2),O=_(y);f(y),be(),f(w),f(m),P((k,F)=>Y(O,`${k??""}/${F??""}`),[()=>Le(t(n)),()=>Le(o)]),p(v,m)};j(u,v=>{t(n)>o&&v(i)})}p(a,l),T()}const Wr=["none","film","animation","stillimage","zerolatency"],zr=["None","Film","Animation","Still Image","Zero Latency"],jr=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow"],Xr=["Ultra Fast","Super Fast","Very Fast","Faster","Fast","Medium","Slow","Slower","Very Slow"],Vr=/\[sound=(?<url>.*)]/,Gr=["jpg","jpeg","png","gif"],Yr=["mp4","webm","mkv"],Hr=["mp3","wav","ogg"];function vt(a){const e=a.match(Vr);let r=null;return e&&e.groups&&e.groups.url&&(r=decodeURIComponent(e.groups.url),r.startsWith("http")||(r="https://"+r)),r}function Ye(a){const e=a.split(".").pop()?.toLowerCase();if(e){if(Gr.includes(e))return"image";if(Yr.includes(e))return"video";if(Hr.includes(e))return"audio"}return"unknown"}function Et(a){return Ye(a)==="image"}function Zr(a){return a.replaceAll(/\[.+?\]/g,"").split(".")[0].trim()}var qr=N("<option> </option>"),Kr=N("<option> </option>"),Jr=N(`<fieldset><legend>Preset</legend> <p>Slower will yield higher quality encodes.</p> <select></select></fieldset> <fieldset><legend>Tune</legend> <p>Optimize the output for specific content types. <br/>Pick <i>Still Image</i> if your input is
				an image file.</p> <select></select></fieldset>`,1),Qr=N('<div class="flash bd-muted"><p><b>FFmpeg settings</b></p> <fieldset><legend>Output format</legend> <p>MP4 highly recommended.</p> <div><label><input type="radio" name="output_format"/> MP4 (H.264)</label> <label><input type="radio" name="output_format"/> WebM (VP8 + 256k Vorbis)</label></div></fieldset> <fieldset><legend>Target Bitrate</legend> <input name="bitrate_range" type="range" min="256" max="16384" step="256"/> <label for="bitrate_range"> </label></fieldset> <!></div>');function Rt(a,e){C(e,!0);const r=[];let o=ie(e,"export_settings",15),n=S("fast"),l=S(2048),s=S("mp4"),d=pe(()=>Et(e.file_name)?"stillimage":"none");ue(()=>{o()&&(t(s)==="mp4"?o(o().settings={preset:t(n),tune:t(d),bitrate:t(l)},!0):t(s)==="webm"&&o(o().settings={bitrate:t(l)},!0),o(o().output_format=t(s),!0))});var u=Qr(),i=b(_(u),2),v=b(_(i),4),m=_(v),w=_(m);Be(w),w.value=w.__value="mp4",be(),f(m);var x=b(m,2),y=_(x);Be(y),y.value=y.__value="webm",be(),f(x),f(v),f(i);var O=b(i,2),k=b(_(O),2);Be(k);var F=b(k,2),W=_(F);f(F),f(O);var X=b(O,2);{var ee=A=>{var z=Jr(),H=I(z),V=b(_(H),4);Me(V,21,()=>jr,Ie,(E,L,h)=>{var M=qr(),R=_(M,!0);f(M);var U={};P(()=>{ot(M,t(n)===t(L)),Y(R,Xr[h]),U!==(U=t(L))&&(M.value=(M.__value=t(L))??"")}),p(E,M)}),f(V),f(H);var K=b(H,2),c=b(_(K),4);Me(c,21,()=>Wr,Ie,(E,L,h)=>{var M=Kr(),R=_(M,!0);f(M);var U={};P(()=>{ot(M,t(d)===t(L)),Y(R,zr[h]),U!==(U=t(L))&&(M.value=(M.__value=t(L))??"")}),p(E,M)}),f(c),f(K),nt(V,()=>t(n),E=>g(n,E)),nt(c,()=>t(d),E=>g(d,E)),p(A,z)};j(X,A=>{t(s)==="mp4"&&A(ee)})}f(u),P(A=>Y(W,`Up to ${A??""}/s`),[()=>Le(t(l)*1e3/8)]),it(r,[],w,()=>t(s),A=>g(s,A)),it(r,[],y,()=>t(s),A=>g(s,A)),$t(k,()=>t(l),A=>g(l,A)),p(a,u),T()}var D;(function(a){a.LOAD="LOAD",a.EXEC="EXEC",a.FFPROBE="FFPROBE",a.WRITE_FILE="WRITE_FILE",a.READ_FILE="READ_FILE",a.DELETE_FILE="DELETE_FILE",a.RENAME="RENAME",a.CREATE_DIR="CREATE_DIR",a.LIST_DIR="LIST_DIR",a.DELETE_DIR="DELETE_DIR",a.ERROR="ERROR",a.DOWNLOAD="DOWNLOAD",a.PROGRESS="PROGRESS",a.LOG="LOG",a.MOUNT="MOUNT",a.UNMOUNT="UNMOUNT"})(D||(D={}));const $r=(()=>{let a=0;return()=>a++})(),ea=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),ta=new Error("called FFmpeg.terminate()");class ra{#e=null;#a={};#r={};#o=[];#n=[];loaded=!1;#i=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:r,data:o}})=>{switch(r){case D.LOAD:this.loaded=!0,this.#a[e](o);break;case D.MOUNT:case D.UNMOUNT:case D.EXEC:case D.FFPROBE:case D.WRITE_FILE:case D.READ_FILE:case D.DELETE_FILE:case D.RENAME:case D.CREATE_DIR:case D.LIST_DIR:case D.DELETE_DIR:this.#a[e](o);break;case D.LOG:this.#o.forEach(n=>n(o));break;case D.PROGRESS:this.#n.forEach(n=>n(o));break;case D.ERROR:this.#r[e](o);break}delete this.#a[e],delete this.#r[e]})};#t=({type:e,data:r},o=[],n)=>this.#e?new Promise((l,s)=>{const d=$r();this.#e&&this.#e.postMessage({id:d,type:e,data:r},o),this.#a[d]=l,this.#r[d]=s,n?.addEventListener("abort",()=>{s(new DOMException(`Message # ${d} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(ea);on(e,r){e==="log"?this.#o.push(r):e==="progress"&&this.#n.push(r)}off(e,r){e==="log"?this.#o=this.#o.filter(o=>o!==r):e==="progress"&&(this.#n=this.#n.filter(o=>o!==r))}load=({classWorkerURL:e,...r}={},{signal:o}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("../workers/worker-BAOIWoxA.js",import.meta.url).href,import.meta.url),{type:"module"}),this.#i()),this.#t({type:D.LOAD,data:r},void 0,o));exec=(e,r=-1,{signal:o}={})=>this.#t({type:D.EXEC,data:{args:e,timeout:r}},void 0,o);ffprobe=(e,r=-1,{signal:o}={})=>this.#t({type:D.FFPROBE,data:{args:e,timeout:r}},void 0,o);terminate=()=>{const e=Object.keys(this.#r);for(const r of e)this.#r[r](ta),delete this.#r[r],delete this.#a[r];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,r,{signal:o}={})=>{const n=[];return r instanceof Uint8Array&&n.push(r.buffer),this.#t({type:D.WRITE_FILE,data:{path:e,data:r}},n,o)};mount=(e,r,o)=>{const n=[];return this.#t({type:D.MOUNT,data:{fsType:e,options:r,mountPoint:o}},n)};unmount=e=>{const r=[];return this.#t({type:D.UNMOUNT,data:{mountPoint:e}},r)};readFile=(e,r="binary",{signal:o}={})=>this.#t({type:D.READ_FILE,data:{path:e,encoding:r}},void 0,o);deleteFile=(e,{signal:r}={})=>this.#t({type:D.DELETE_FILE,data:{path:e}},void 0,r);rename=(e,r,{signal:o}={})=>this.#t({type:D.RENAME,data:{oldPath:e,newPath:r}},void 0,o);createDir=(e,{signal:r}={})=>this.#t({type:D.CREATE_DIR,data:{path:e}},void 0,r);listDir=(e,{signal:r}={})=>this.#t({type:D.LIST_DIR,data:{path:e}},void 0,r);deleteDir=(e,{signal:r}={})=>this.#t({type:D.DELETE_DIR,data:{path:e}},void 0,r)}var mt;(function(a){a.MEMFS="MEMFS",a.NODEFS="NODEFS",a.NODERAWFS="NODERAWFS",a.IDBFS="IDBFS",a.WORKERFS="WORKERFS",a.PROXYFS="PROXYFS"})(mt||(mt={}));class Mt{current_id=0;ids=[];ffmpeg_process_id=0;#e=S(re({}));get messages(){return t(this.#e)}set messages(e){g(this.#e,e,!0)}log(e,r){this.add_message({message:e,error:!1},r)}error(e,r){this.add_message({message:`Error: ${e}`,error:!0},r)}add_message(e,r){r||(r=`message_${this.current_id}`,this.current_id+=1),this.ids.includes(r)||this.ids.push(r),this.messages={...this.messages,[r]:e},e.error?console.error(`${e.message} (${r})`):console.log(`${e.message} (${r})`)}reset(){this.current_id=0,this.ids=[],this.messages={},this.ffmpeg_process_id=0}bump_ffmpeg_process_id(){this.ffmpeg_process_id+=1}listen_ffmpeg_message=e=>{let r=`FFmpeg [${e.type}]: ${e.message}`;this.log(r,`ffmpeg_message_${this.ffmpeg_process_id}`)};listen_ffmpeg_progress=e=>{const r=e.progress*100;this.log(`FFmpeg [progress]: ${r.toFixed(2)}%`,`ffmpeg_progress_${this.ffmpeg_process_id}`)};toggle_ffmpeg_listen(e,r){r.manage_listeners(e,this.listen_ffmpeg_message,this.listen_ffmpeg_progress)}}const aa=""+new URL("../assets/ffmpeg-core.CI9Irx9p.js",import.meta.url).href,oa=""+new URL("../assets/ffmpeg-core.CgUfceKH.wasm",import.meta.url).href;class Lt{ffmpeg_instance=null;ffmpeg_loaded=!1;get_instance(){return this.ffmpeg_instance}is_loaded(){return this.ffmpeg_loaded}async init(){if(!this.ffmpeg_loaded)try{this.ffmpeg_instance=new ra,await this.ffmpeg_instance.load({coreURL:aa,wasmURL:oa}),console.log("FFmpeg loaded successfully."),this.ffmpeg_loaded=!0}catch(e){throw console.error("Failed to load FFmpeg:",e),e}}manage_listeners(e,r,o){if(!this.ffmpeg_instance){console.error("FFmpeg is not initialized.");return}const n=e?"on":"off";this.ffmpeg_instance[n]("log",r),this.ffmpeg_instance[n]("progress",o)}}const na=a=>new Promise((e,r)=>{const o=new FileReader;o.onload=()=>{const{result:n}=o;n instanceof ArrayBuffer?e(new Uint8Array(n)):e(new Uint8Array)},o.onerror=n=>{r(Error(`File could not be read! Code=${n?.target?.error?.code||-1}`))},o.readAsArrayBuffer(a)}),He=async a=>{let e;if(typeof a=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(a)?e=atob(a.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(a)).arrayBuffer();else if(a instanceof URL)e=await(await fetch(a)).arrayBuffer();else if(a instanceof File||a instanceof Blob)e=await na(a);else return new Uint8Array;return new Uint8Array(e)};function ia(a,e,r){const o=a.settings,n=sa(e,r);return Et(e.name)&&la(n),a.trim&&ca(n,a.trim),ua(n,o),da(n,a),fa(n),n}function sa(a,e){const r=["-i",a.name];return e&&(r.push("-i",e.name),r.push("-map","1:a:0")),r.push("-map","0:v:0"),r}function la(a){a.unshift("-loop","1","-r","1"),a.push("-shortest","-r","1")}function da(a,e){const r=[];e.crop.enabled&&r.push(`crop=${e.crop.width}:${e.crop.height}:${e.crop.x}:${e.crop.y}`),e.scale_down?r.push("scale=w=2048:h=2048:force_original_aspect_ratio=decrease:force_divisible_by=2"):r.push("pad=ceil(iw/2)*2:ceil(ih/2)*2"),r.length>0&&a.push("-vf",r.join(","))}function ca(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",q(r)),a.push("-ss",q(o)),a.push("-t",q(e.end-e.start))}function ua(a,e){a.push("-c:v","libx264","-preset",e.preset),e.tune!=="none"&&a.push("-tune",e.tune),e.bitrate&&a.push("-b:v",`${e.bitrate}k`)}function fa(a){a.push("-pix_fmt:v","yuv420p","output.mp4")}function _a(a,e,r){const o=a.settings,n=r&&a.remove_audio===!1,l=va(e);return n&&ma(l,r),a.trim&&ha(l,a.trim),pa(l,o),ga(l,a),n&&ba(l),wa(l),l}function va(a){return["-i",a.name,"-map","0:v:0"]}function ma(a,e){a.push("-i",e.name,"-map","1:a:0")}function ha(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",q(r)),a.push("-ss",q(o)),a.push("-t",q(e.end-e.start))}function ga(a,e){const r=[];e.crop.enabled&&r.push(`crop=${e.crop.width}:${e.crop.height}:${e.crop.x}:${e.crop.y}`),e.scale_down&&r.push("scale=w=2048:h=2048:force_original_aspect_ratio=decrease"),r.length>0&&a.push("-vf",r.join(","))}function pa(a,e){a.push("-c:v","libvpx","-crf","10","-b:v",`${e.bitrate}k`)}function ba(a){a.push("-c:a","libvorbis","-b:a","256k")}function wa(a){a.push("output.webm")}function ya(a,e){const r=xa(e);return a.trim&&ka(r,a.trim),Ea(r),Ra(r),r}function xa(a){return["-i",a.name,"-map","0:a:0"]}function ka(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",q(r)),a.push("-ss",q(o)),a.push("-t",q(e.end-e.start))}function Ea(a){a.push("-c:a","libvorbis","-b:a","256k")}function Ra(a){a.push("output.ogg")}function St(a,e,r){switch(a.output_format){case"mp4":return ia(a,e,r);case"webm":return _a(a,e,r);case"ogg":return ya(a,e);default:throw new Error(`Unsupported output format: ${a.output_format}`)}}async function ht(a,e,r,o,n){o.log("Writing input file to ffmpeg..."),await a.writeFile(e.name,await He(e.blob));const l=St(r,e);o.log("ffmpeg "+l.join(" ")),await a.exec(l),o.bump_ffmpeg_process_id(),o.log("Reading output...");const d=await a.readFile(`output.${r.output_format}`);return new Blob([d],{type:`${n}/${r.output_format}`})}const gt={progress:0,current_time:0,duration:0,start_progress:0,end_progress:1};var Ma=N(`<div class="flash accent"><p><!> The cropped video exceeds the maximum resolution of 2048x2048 pixels and will be scaled
					down.</p></div>`),La=(a,e)=>{e()},Sa=N('<section class="flash px-2 bd-muted"><div class="media-container"><video>Your browser does not support the video tag.</video> <!></div> <section><!> <!></section></section> <div class="flash bd-muted"><label><input type="checkbox" name="upload_audio"/> Upload audio file to catbox.moe</label></div> <!> <!> <!> <button type="submit">Split</button>',3),Oa=N(`<p>Filename: <code> </code></p> <p><small>Some browsers won't let you download files that contain '%' in the name. In that
							case, please copy and paste this filename.</small></p>`,1),Na=N("<p><b>Extracted audio</b></p> <audio controls></audio>",1),Fa=N('<div class="flash bd-muted"><p><b>Video result</b></p> <video controls></video> <a title="Download processedvideo"><button>Download</button></a></div> <div class="flash bd-muted"><!></div>',3),Ia=N("<!> <!>",1),Ua=N(`<div class="flash bg-muted bd-muted"><p><b class="default">Instructions</b></p> <p>Upload a video, trim it and crop it.<br/>This tool will then split the audio and video into
			separate files.<br/> The audio file will automatically be uploaded to one of several hosts, with the URL embedded in
			the video's filename.</p></div>`),Da=N("<!> <!>",1);function Aa(a,e){C(e,!0);let r=S(null),o=S(null),n=S(re(gt)),l=S(!1);const s=new Mt,d=new Lt;let u=S("ready"),i=S(!0),v=S(re({output_format:"mp4",settings:{preset:"fast",tune:"none",bitrate:2048},crop:Re()})),m=S(re({name:"",blob:new Blob})),w=S(re({name:"",blob:new Blob}));Ze(()=>{setInterval(function(){F(new Event("ontimeupdate"))},1/24*1e3),d.init()}),ue(()=>{t(r)&&(g(n,gt,!0),g(u,"ready"))});function x(c){t(n).start_progress=c,t(n).start_progress>t(n).end_progress&&(t(n).end_progress=t(n).start_progress+.05),t(o)&&(g(l,!0),t(o).currentTime=c*t(o).duration,t(n).progress<t(n).start_progress&&(t(n).progress=t(n).start_progress))}function y(c){t(n).end_progress=c,t(n).end_progress<t(n).start_progress&&(t(n).start_progress=t(n).end_progress-.05),t(o)&&(g(l,!0),t(o).currentTime=c*t(o).duration,t(n).progress>t(n).end_progress&&(t(n).progress=t(n).end_progress))}function O(c){t(o)&&(isNaN(t(o).duration)||(c<t(n).start_progress?t(n).progress=t(n).start_progress:c>t(n).end_progress&&(t(n).progress=t(n).end_progress),t(o).currentTime=c*t(o).duration))}function k(){t(o)&&(t(n).duration=t(o).duration)}function F(c){t(o)&&(t(l)||(t(n).progress=t(o).currentTime/t(o).duration,t(n).current_time=t(o).currentTime,t(n).progress<t(n).start_progress-.01?t(o).currentTime=t(n).start_progress*t(o).duration:t(n).progress>t(n).end_progress&&(t(o).loop?t(o).currentTime=t(n).start_progress*t(o).duration:(t(o).pause(),t(o).currentTime=t(n).end_progress*t(o).duration))))}function W(){g(l,!1),t(o)&&(t(o).currentTime=t(n).progress*t(o).duration)}async function X(c){const E=new FormData;E.append("reqtype","fileupload"),E.append("fileToUpload",c),s.log(`Uploading audio: ${c.name}...`);try{const L=await fetch("https://catbox.moe/user/api.php",{method:"POST",body:E});if(!L.ok)throw new Error(`Status: ${L.status}`);let h=await L.text();return s.log(h,"upload_audio_response"),h}catch(L){return console.error(L),null}}async function ee(){s.reset(),g(u,"loading"),s.log("Splitting audio and video...");const c=d.get_instance();if(!c){s.error("FFmpeg instance is not available.");return}if(!t(r)){s.error("No file selected.");return}let E="";const L=await ht(c,{name:t(r).name,blob:t(r)},{output_format:"ogg",trim:{start:t(n).start_progress*t(n).duration,end:t(n).end_progress*t(n).duration},crop:Re()},s,"audio").catch(U=>(s.error(U.message),null));if(!L){s.error("Failed to extract audio from video file.");return}if(g(w,{name:"sound.ogg",blob:L},!0),t(i)){let U=await X(new File([L],"extracted_audio.ogg"));if(!U){s.error("Failed to upload audio file.");return}E=encodeURIComponent(U)}const h=Re();h&&(t(v).crop=h);const M=await ht(c,{name:t(r).name,blob:t(r)},{...t(v),trim:{start:t(n).start_progress*t(n).duration,end:t(n).end_progress*t(n).duration},crop:Re()},s,"video").catch(U=>(s.error(U.message),null));if(!M){s.error("Failed to process video file.");return}const R=t(r).name.replace(/\.[^/.]+$/,"")+(E?`[sound=${E}]`:"");g(m,{name:R,blob:M},!0),s.log("Audio and video split successfully."),s.log(`Final video: ${t(m).name} (${t(m).blob.size} bytes)`),g(u,"finished")}var A=Da(),z=I(A);wt(z,{accept_image:!1,show_preview:!1,get current_file(){return t(r)},set current_file(c){g(r,c,!0)}});var H=b(z,2);{var V=c=>{var E=G(),L=I(E);{var h=R=>{var U=Sa(),B=I(U),J=_(B),ae=_(J);Ue(ae,Z=>g(o,Z),()=>t(o));var me=b(ae,2);Ir(me,{get video(){return t(o)}}),f(J);var he=b(J,2),ve=_(he);lr(ve,{get video_data(){return t(n)},on_seek:O,on_start_seek:x,on_end_seek:y,on_release:W});var xe=b(ve,2);Sr(xe,{get video(){return t(o)},get video_data(){return t(n)}}),f(he),f(B);var ge=b(B,2),we=_(ge),ke=_(we);Be(ke),be(),f(we),f(ge);var De=b(ge,2);{var We=Z=>{var Se=Ma(),qe=_(Se),Ot=_(qe);_r(Ot,{}),be(),f(qe),f(Se),p(Z,Se)};j(De,Z=>{(Re().width>2048||Re().height>2048)&&Z(We)})}var oe=b(De,2);Pr(oe,{get video_data(){return t(n)},get export_settings(){return t(v)}});var ce=b(oe,2);Rt(ce,{get file_name(){return t(r).name},get export_settings(){return t(v)},set export_settings(Z){g(v,Z,!0)}});var Ee=b(ce,2);Ee.__click=[La,ee],P(Z=>$(ae,"src",Z),[()=>URL.createObjectURL(t(r))]),ne("durationchange",ae,k),ne("resize",ae,onresize),er(ke,()=>t(i),Z=>g(i,Z)),p(R,U)},M=R=>{var U=Ia(),B=I(U);xt(B,{get message_manager(){return s},get ffmpeg_manager(){return d}});var J=b(B,2);{var ae=me=>{var he=Fa(),ve=I(he),xe=b(_(ve),2),ge=b(xe,2);f(ve);var we=b(ve,2),ke=_(we);{var De=oe=>{var ce=Oa(),Ee=I(ce),Z=b(_(Ee)),Se=_(Z);f(Z),f(Ee),be(2),P(()=>Y(Se,`${t(m).name??""}.${t(v).output_format??""}`)),p(oe,ce)},We=oe=>{var ce=Na(),Ee=b(I(ce),2);P(Z=>$(Ee,"src",Z),[()=>URL.createObjectURL(t(w).blob)]),p(oe,ce)};j(ke,oe=>{t(i)?oe(De):oe(We,!1)})}f(we),P((oe,ce)=>{$(xe,"src",oe),$(ge,"href",ce),$(ge,"download",`${t(m).name}.${t(v).output_format}`)},[()=>URL.createObjectURL(t(m).blob),()=>URL.createObjectURL(t(m).blob)]),p(me,he)};j(J,me=>{t(u)==="finished"&&me(ae)})}p(R,U)};j(L,R=>{t(u)==="ready"?R(h):R(M,!1)})}p(c,E)},K=c=>{var E=Ua();p(c,E)};j(H,c=>{t(r)?c(V):c(K,!1)})}p(a,A),T()}ye(["click"]);var Ba=N("<video controls><source/> Your browser does not support the video tag.</video>",2),Ca=N('<img alt="Selected image"/>'),Ta=N('<div class="flash bd-muted"><p><b>Preview</b></p> <p><code> </code></p> <!></div>');function pt(a,e){C(e,!0);var r=G(),o=I(r);{var n=l=>{var s=Ta(),d=b(_(s),2),u=_(d),i=_(u);f(u),f(d);var v=b(d,2);{var m=x=>{var y=Ba(),O=_(y);be(),f(y),P(k=>{$(O,"src",k),$(O,"type",e.current_file.type)},[()=>URL.createObjectURL(e.current_file)]),p(x,y)},w=x=>{var y=G(),O=I(y);{var k=F=>{var W=Ca();P(X=>$(W,"src",X),[()=>URL.createObjectURL(e.current_file)]),p(F,W)};j(O,F=>{Ye(e.current_file.name)==="image"&&F(k)},!0)}p(x,y)};j(v,x=>{Ye(e.current_file.name)==="video"?x(m):x(w,!1)})}f(s),P(x=>Y(i,`Original size: ${x??""}`),[()=>Le(e.current_file.size,{units:"iec"})]),p(l,s)};j(o,l=>{e.current_file&&l(n)})}p(a,r),T()}async function Pa(a,e){const r=await fetch(a);if(!r.ok)throw new Error(`Failed to download file: ${r.statusText}`);const o=r.headers.get("Content-Length");if(!o)throw new Error("Unable to determine file size for progress tracking.");const n=parseInt(o,10);let l=0;const s=r.body?.getReader(),d=[];if(!s)throw new Error("Failed to read response body.");for(;;){const{done:i,value:v}=await s.read();if(i)break;if(v){d.push(v),l+=v.length;const m=l/n*100;e(m)}}return new Blob(d)}async function Wa(a,e,r,o,n){n.log("Merging video and audio..."),n.log("Writing input files to ffmpeg..."),await a.writeFile(e.name,await He(e.blob)),await a.writeFile(r.name,await He(r.blob));const l=St(o,e,r);n.log("ffmpeg "+l.join(" ")),await a.exec(l),n.bump_ffmpeg_process_id(),n.log("Reading output...");const d=await a.readFile(`output.${o.output_format}`);return new Blob([d],{type:`video/${o.output_format}`})}var za=(a,e)=>e(),ja=N('<!> <div><!> <button type="submit">Merge</button></div>',1),Xa=N('<div class="flash bd-accent"><p><b>Output</b></p> <p><code> </code></p> <video controls></video> <p class="centered"><a><button>Download</button></a></p></div>',2),Va=N("<!> <!>",1),Ga=N('<p class="flash danger icon"><!> Cannot find sound URL / invalid sound URL in file <code class="bd-danger"> </code>.</p> <!>',1),Ya=N(`<div class="flash bg-muted bd-muted"><p><b>Instructions</b></p> <p>Upload a .webm file containing a [sound=URL] link in the filename.<br/> Example: <code>video[sound=https://example.com/sound.mp3].webm</code><br/> This tool
			downloads the linked sound file and merges it back into the video file for easy viewing.<br/>This is also useful for archival in case the file hosts go down.</p></div>`),Ha=N("<!> <!>",1);function Za(a,e){C(e,!0);let r=S(re(new Blob));const o=new Mt,n=new Lt;let l=S("ready"),s=S(null),d=S(re({output_format:"mp4",settings:{preset:"fast",tune:"none",bitrate:2048},crop:{enabled:!1,x:0,y:0,width:0,height:0}}));Ze(()=>{n.init()}),ue(()=>{t(s)&&u()});function u(){g(r,new Blob,!0),o.reset(),g(l,"ready")}async function i(){if(!t(s)){o.error("No file selected for merging.");return}g(l,"loading");const k=await v(t(s).name);if(!k||!k.blob){o.error("Failed to download sound from file name.");return}let F={name:t(s).name,blob:t(s)};const W=n.get_instance();if(!W){o.error("FFmpeg instance is not available.");return}try{g(r,await Wa(W,F,k,t(d),o),!0)}catch(X){o.error(`FFmpeg error: ${X}`);return}g(l,"finished")}async function v(k){const F=vt(k);if(!F)return o.error("Invalid sound URL."),null;try{return{blob:await Pa(F,ee=>{o.log(`Downloading sound... ${ee.toFixed(2)}%`,"download_sound")}),name:`${encodeURIComponent(F)}`}}catch(W){return o.error(`Failed to download sound: ${W}`),null}}var m=Ha(),w=I(m);wt(w,{get current_file(){return t(s)},set current_file(k){g(s,k,!0)}});var x=b(w,2);{var y=k=>{var F=G(),W=I(F);{var X=A=>{var z=G(),H=I(z);{var V=c=>{var E=ja(),L=I(E);pt(L,{get current_file(){return t(s)}});var h=b(L,2),M=_(h);Rt(M,{get file_name(){return t(s).name},get export_settings(){return t(d)},set export_settings(U){g(d,U,!0)}});var R=b(M,2);R.__click=[za,i],f(h),p(c,E)},K=c=>{var E=Va(),L=I(E);xt(L,{get message_manager(){return o},get ffmpeg_manager(){return n}});var h=b(L,2);{var M=R=>{var U=Xa(),B=b(_(U),2),J=_(B),ae=_(J);f(J),f(B);var me=b(B,2),he=b(me,2),ve=_(he);f(he),f(U),P((xe,ge,we,ke)=>{Y(ae,`Final size: ${xe??""}`),$(me,"src",ge),$(ve,"href",we),$(ve,"download",`${ke??""}.webm`)},[()=>Le(t(r).size,{units:"iec"}),()=>URL.createObjectURL(t(r)),()=>URL.createObjectURL(t(r)),()=>Zr(t(s).name)]),p(R,U)};j(h,R=>{t(l)==="finished"&&R(M)})}p(c,E)};j(H,c=>{t(l)==="ready"?c(V):c(K,!1)})}p(A,z)},ee=A=>{var z=Ga(),H=I(z),V=_(H);ur(V,{});var K=b(V,2),c=_(K,!0);f(K),be(),f(H);var E=b(H,2);pt(E,{get current_file(){return t(s)}}),P(()=>Y(c,t(s).name)),p(A,z)};j(W,A=>{vt(t(s).name)?A(X):A(ee,!1)})}p(k,F)},O=k=>{var F=Ya();p(k,F)};j(x,k=>{t(s)?k(y):k(O,!1)})}p(a,m),T()}ye(["click"]);let Ae=S(re({open:!1,title:"",content:"",on_close:void 0}));var qa=(a,e)=>t(e).on_close?.(),Ka=N('<dialog class="svelte-1dld0ml"><header><h2> </h2></header> <p> </p> <footer><form method="dialog"><button type="submit">Close</button></form></footer></dialog>');function Ja(a,e){C(e,!0);let r=S(null);ue(()=>{t(r)&&t(Ae).open&&t(r).showModal()});var o=Ka(),n=_(o),l=_(n),s=_(l,!0);f(l),f(n);var d=b(n,2),u=_(d,!0);f(d);var i=b(d,2),v=_(i),m=_(v);m.__click=[qa,Ae],f(v),f(i),f(o),Ue(o,w=>g(r,w),()=>t(r)),P(()=>{Y(s,t(Ae).title),Y(u,t(Ae).content)}),p(a,o),T()}ye(["click"]);var Qa=(a,e,r)=>g(e,t(r).name,!0),$a=N("<li> </li>"),eo=N('<header class="my-4"><h3>Soundpost Tools</h3> <small>Utilities compatible with <a href="https://github.com/rcc11/4chan-sounds-player">4chan Sounds Player</a>, <a href="https://sleazyfork.org/en/scripts/31045-4chan-external-sounds">4chan External Sounds</a>, etc.</small></header> <main><menu></menu> <!> <!></main>',1);function io(a){const e=[{name:"splitter",component:Aa,label:"WebM Maker"},{name:"merger",component:Za,label:"WebM Merger"}];let r=S("splitter");var o=eo(),n=b(I(o),2),l=_(n);Me(l,21,()=>e,Ie,(u,i)=>{var v=$a();v.__click=[Qa,r,i];let m;var w=_(v,!0);f(v),P(x=>{m=Fe(v,1,"",null,m,x),Y(w,t(i).label)},[()=>({selected:t(r)===t(i).name})]),p(u,v)}),f(l);var s=b(l,2);Me(s,17,()=>e,u=>u.name,(u,i)=>{var v=G(),m=I(v);{var w=x=>{var y=G(),O=I(y);qt(O,()=>t(i).component,(k,F)=>{F(k,{})}),p(x,y)};j(m,x=>{t(r)===t(i).name&&x(w)})}p(u,v)});var d=b(s,2);Ja(d,{}),f(n),p(a,o)}ye(["click"]);export{io as component};
