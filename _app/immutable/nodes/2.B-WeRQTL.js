import"../chunks/DsnmJJEf.js";import{x as te,y as qe,M as We,b7 as Ot,z as Nt,E as Ft,G as It,b8 as Ut,aV as Dt,b9 as At,ak as Bt,F as Ct,D as Ke,C as Je,a0 as Tt,ba as Qe,L as Pt,K as Wt,av as zt,aD as Ce,r as Te,aC as jt,N as Xt,q as $e,bb as Vt,I as Oe,u as pt,bc as Gt,p as C,b as ce,g as t,ae as S,k as F,o as _,v as p,s as f,t as W,ah as ge,m as g,n as T,V as h,aN as ye,b6 as oe,bd as Be,w as H,be as Yt,ag as Y,l as U,bf as ie,P as se,bg as Ht,_ as re,ad as He,bh as pe}from"../chunks/D4KbEBlY.js";import{p as ne,i as X,r as le,b as ue,c as Zt}from"../chunks/CJXYB7lu.js";import{f as et,c as tt,g as $,s as Fe,d as qt,h as rt,e as Me,i as Ie,j as Kt,r as Ae,k as at,l as ot}from"../chunks/D9XZEmWM.js";import{b as Ue}from"../chunks/C_PBsP8N.js";function Jt(a,e,r,o,n,l){let s=te;te&&qe();var d,u,i=null;te&&We.nodeType===Ot&&(i=We,qe());var v=te?We:a,m,y=tt;Nt(()=>{const E=e()||null;var x=Ut;if(E!==d){var O=tt;et(y),m&&(E===null?Pt(m,()=>{m=null,u=null}):E===u?Wt(m):(zt(m),Qe(!1))),E&&E!==u&&(m=It(()=>{if(i=te?i:document.createElementNS(x,E),Dt(i,i),o){te&&At(E)&&i.append(document.createComment(""));var R=te?Bt(i):i.appendChild(Ct());te&&(R===null?Ke(!1):Je(R)),o(i,R)}Tt.nodes_end=i,v.before(i)})),d=E,d&&(u=d),Qe(!0),et(O)}},Ft),s&&(Ke(!0),Je(v))}function Qt(a,e,r=e){var o=Vt(),n=new WeakSet;Ce(a,"input",l=>{var s=l?a.defaultValue:a.value;if(s=je(a)?Xe(s):s,r(s),Oe!==null&&n.add(Oe),o&&s!==(s=e())){var d=a.selectionStart,u=a.selectionEnd;a.value=s??"",u!==null&&(a.selectionStart=d,a.selectionEnd=Math.min(u,a.value.length))}}),(te&&a.defaultValue!==a.value||pt(e)==null&&a.value)&&(r(je(a)?Xe(a.value):a.value),Oe!==null&&n.add(Oe)),Te(()=>{var l=e();if(a===document.activeElement){var s=Gt??Oe;if(n.has(s))return}je(a)&&l===Xe(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}const ze=new Set;function nt(a,e,r,o,n=o){var l=r.getAttribute("type")==="checkbox",s=a;let d=!1;if(e!==null)for(var u of e)s=s[u]??=[];s.push(r),Ce(r,"change",()=>{var i=r.__value;l&&(i=it(s,i,r.checked)),n(i)},()=>n(l?[]:null)),Te(()=>{var i=o();if(te&&r.defaultChecked!==r.checked){d=!0;return}l?(i=i||[],r.checked=i.includes(r.__value)):r.checked=jt(r.__value,i)}),Xt(()=>{var i=s.indexOf(r);i!==-1&&s.splice(i,1)}),ze.has(s)||(ze.add(s),$e(()=>{s.sort((i,v)=>i.compareDocumentPosition(v)===4?-1:1),ze.delete(s)})),$e(()=>{if(d){var i;if(l)i=it(s,i,r.checked);else{var v=s.find(m=>m.checked);i=v?.__value}n(i)}})}function $t(a,e,r=e){Ce(a,"change",o=>{var n=o?a.defaultChecked:a.checked;r(n)}),(te&&a.defaultChecked!==a.checked||pt(e)==null)&&r(a.checked),Te(()=>{var o=e();a.checked=!!o})}function it(a,e,r){for(var o=new Set,n=0;n<a.length;n+=1)a[n].checked&&o.add(a[n].__value);return r||o.delete(e),Array.from(o)}function je(a){var e=a.type;return e==="number"||e==="range"}function Xe(a){return a===""?null:+a}function er(a,e,r=e){Ce(a,"change",()=>{r(a.files)}),te&&a.files&&r(a.files),Te(()=>{a.files=e()})}var tr=F('<div><div class="flash bd-muted bg-accent"><label for="source_media" style="font-weight:bold;">Upload a video or image</label> <input id="source_media" name="source_media" type="file"/></div></div>');function bt(a,e){C(e,!0);const r=["video/mp4","video/webm"],o=["image/jpeg","image/png","image/gif"];let n=ne(e,"current_file",15),l=ne(e,"accept_video",3,!0),s=ne(e,"accept_image",3,!0),d=ge(()=>{const y=[];return l()&&y.push(...r),s()&&y.push(...o),y}),u=S(null);ce(()=>{t(u)&&t(u).length>0?n(t(u)[0]):n(null)});var i=tr(),v=_(i),m=p(_(v),2);f(v),f(i),W(y=>$(m,"accept",y),[()=>t(d).join(",")]),er(m,()=>t(u),y=>h(u,y)),g(a,i),T()}function J(a,e=!0){const r=Math.floor(a/3600).toString().padStart(2,"0"),o=Math.floor(a%3600/60).toString().padStart(2,"0"),n=Math.floor(a%60).toString().padStart(2,"0"),l=Math.floor(a%1*1e3).toString().padStart(3,"0"),s=`${o}:${n}.${l}`;return e?`${r}:${s}`:s}function rr(a,e,r=1e-4){return Math.abs(a-e)<r}function st(a,e){h(e,!0),document.body.style.cursor="ew-resize"}function ar(a,e,r,o,n){if(!t(e)||!t(r)||!o.seekbar)return;const l=o.seekbar.getBoundingClientRect();let d=(a.touches[0].clientX-l.left)/(l.width-t(r).getBoundingClientRect().width);n(Math.max(0,Math.min(1,d))),o.seek_type==="handle"?o.on_seek?.(n()):o.on_seek?.(n(),!0)}var or=F('<div class="p-.5 timer-display timer-text flash default unselectable svelte-wan5yw"> </div>'),nr=F("<div><!></div>");function Ve(a,e){C(e,!0);let r=ne(e,"progress",7),o=S(!1),n=S(!1),l=S(null);function s(){!t(o)||!t(l)||!e.seekbar||(h(o,!1),document.body.style.cursor="auto",e.on_seek?.(r()))}function d(x){if(!t(o)||!t(l)||!e.seekbar)return;const O=e.seekbar.getBoundingClientRect();let R=(x.clientX-O.left)/(O.width-t(l).getBoundingClientRect().width);r(Math.max(0,Math.min(1,R))),e.seek_type==="handle"?e.on_seek?.(r()):e.on_seek?.(r(),!0)}function u(){if(!t(l)||!e.seekbar)return"0%";const x=e.seekbar.getBoundingClientRect();let O=(x.width-t(l).getBoundingClientRect().width)/x.width;return e.seek_type==="handle"||e.seek_type==="right_bracket"?`${r()*100*O}%`:`${r()*100}%`}var i=nr();oe("mouseup",Be,s),oe("mousemove",Be,d);let v;i.__touchstart=[st,o],i.__touchend=s,i.__touchmove=[ar,o,l,e,r],i.__mousedown=[st,o],i.__mousemove=d;let m;var y=_(i);{var E=x=>{var O=or(),R=_(O,!0);f(O),W(I=>H(R,I),[()=>J(r()*e.duration,!1)]),g(x,O)};X(y,x=>{(t(n)||t(o))&&x(E)})}f(i),Ue(i,x=>h(l,x),()=>t(l)),W((x,O)=>{v=Fe(i,1,`draggable ${e.seek_type??""} unselectable`,"svelte-wan5yw",v,x),m=qt(i,"",m,O)},[()=>({"z-index-100":t(n)||t(o)}),()=>({left:u()})]),oe("touchcancel",i,s),oe("mouseenter",i,()=>h(n,!0)),oe("mouseleave",i,()=>h(n,!1)),g(a,i),T()}ye(["touchstart","touchend","touchmove","mousedown","mousemove"]);var ir=F('<div class="parent svelte-hswmh"><div class="seekbar svelte-hswmh"><!> <!> <!></div></div>');function sr(a,e){C(e,!0);let r=S(null);var o=ir(),n=_(o),l=_(n);{let u=ge(()=>e.video_data.start_progress??0);Ve(l,{get progress(){return t(u)},seek_type:"left_bracket",get seekbar(){return t(r)},get on_seek(){return e.on_start_seek},get duration(){return e.video_data.duration}})}var s=p(l,2);{let u=ge(()=>e.video_data.end_progress??100);Ve(s,{get progress(){return t(u)},seek_type:"right_bracket",get seekbar(){return t(r)},get on_seek(){return e.on_end_seek},get duration(){return e.video_data.duration}})}var d=p(s,2);{let u=ge(()=>e.video_data.progress??0);Ve(d,{get progress(){return t(u)},seek_type:"handle",get seekbar(){return t(r)},get on_seek(){return e.on_seek},get duration(){return e.video_data.duration}})}f(n),Ue(n,u=>h(r,u),()=>t(r)),f(o),g(a,o),T()}/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const lr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var dr=Yt("<svg><!><!></svg>");function fe(a,e){C(e,!0);const r=ne(e,"color",3,"currentColor"),o=ne(e,"size",3,24),n=ne(e,"strokeWidth",3,2),l=ne(e,"absoluteStrokeWidth",3,!1),s=ne(e,"iconNode",19,()=>[]),d=le(e,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var u=dr();rt(u,m=>({...lr,...d,width:o(),height:o(),stroke:r(),"stroke-width":m,class:["lucide-icon lucide",e.name&&`lucide-${e.name}`,e.class]}),[()=>l()?Number(n())*24/Number(o()):n()]);var i=_(u);Me(i,17,s,Ie,(m,y)=>{var E=ge(()=>Ht(t(y),2));let x=()=>t(E)[0],O=()=>t(E)[1];var R=Y(),I=U(R);Jt(I,x,!0,(z,V)=>{rt(z,()=>({...O()}))}),g(m,R)});var v=p(i);ie(v,()=>e.children??se),f(u),g(a,u),T()}function cr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];fe(a,ue({name:"circle-alert"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function ur(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];fe(a,ue({name:"infinity"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function fr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];fe(a,ue({name:"info"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function _r(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1"}]];fe(a,ue({name:"pause"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function vr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];fe(a,ue({name:"play"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function mr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"m17 2 4 4-4 4"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}],["path",{d:"m7 22-4-4 4-4"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3"}],["path",{d:"M11 10h1v4"}]];fe(a,ue({name:"repeat-1"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function hr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];fe(a,ue({name:"square"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function gr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]];fe(a,ue({name:"volume-2"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function pr(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M16 9a5 5 0 0 1 .95 2.293"}],["path",{d:"M19.364 5.636a9 9 0 0 1 1.889 9.96"}],["path",{d:"m2 2 20 20"}],["path",{d:"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11"}],["path",{d:"M9.828 4.172A.686.686 0 0 1 11 4.657v.686"}]];fe(a,ue({name:"volume-off"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function lt(a,e){C(e,!0);/**
 * @license @lucide/svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=le(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];fe(a,ue({name:"x"},()=>r,{get iconNode(){return o},children:(n,l)=>{var s=Y(),d=U(s);ie(d,()=>e.children??se),g(n,s)},$$slots:{default:!0}})),T()}function br(a,e,r){e()&&(e().pause(),r())}function wr(a,e,r,o){e()&&((e().ended||rr(r.video_data.progress,r.video_data.end_progress))&&o(),e().play())}var yr=(a,e)=>e()?.pause(),xr=F('<button class="bd-accent svelte-m6aj9m"><!></button>'),kr=F('<button class="svelte-m6aj9m"><!></button>'),Er=(a,e)=>h(e,!t(e)),Rr=(a,e)=>h(e,!t(e)),Mr=F('<div class="controls-container svelte-m6aj9m"><div class="controls svelte-m6aj9m"><!> <button class="svelte-m6aj9m"><!></button> <div class="timer-text flash accent svelte-m6aj9m"> </div> <div class="timer-text flash attention svelte-m6aj9m"> </div></div> <div class="controls svelte-m6aj9m"><button><!></button> <button><!></button></div></div>');function Lr(a,e){C(e,!0);let r=ne(e,"video",7);ce(()=>{r()&&(r().addEventListener("play",()=>h(o,!0)),r().addEventListener("pause",()=>h(o,!1)),r().addEventListener("ended",()=>h(o,!1)),r().addEventListener("loadstart",()=>h(o,!1)))});let o=S(!1),n=S(!0),l=S(!0);function s(){!r()||!e.video_data||(r().currentTime=e.video_data.start_progress*e.video_data.duration)}ce(()=>{r()&&(r().loop=t(n),r().muted=!t(l))});var d=Mr(),u=_(d),i=_(u);{var v=b=>{var k=xr();k.__click=[yr,r];var w=_(k);_r(w,{}),f(k),g(b,k)},m=b=>{var k=kr();k.__click=[wr,r,e,s];var w=_(k);vr(w,{}),f(k),g(b,k)};X(i,b=>{t(o)?b(v):b(m,!1)})}var y=p(i,2);y.__click=[br,r,s];var E=_(y);hr(E,{}),f(y);var x=p(y,2),O=_(x);f(x);var R=p(x,2),I=_(R);f(R),f(u);var z=p(u,2),V=_(z);V.__click=[Er,n];let ee;var A=_(V);{var j=b=>{ur(b,{})},Z=b=>{mr(b,{})};X(A,b=>{t(n)?b(j):b(Z,!1)})}f(V);var G=p(V,2);G.__click=[Rr,l];let L;var c=_(G);{var M=b=>{gr(b,{})},N=b=>{pr(b,{})};X(c,b=>{t(l)?b(M):b(N,!1)})}f(G),f(z),f(d),W((b,k,w,B,P,q,_e)=>{H(O,`${b??""} / ${k??""}`),H(I,`[${w??""} : ${B??""}] (${P??""})`),ee=Fe(V,1,"svelte-m6aj9m",null,ee,q),L=Fe(G,1,"svelte-m6aj9m",null,L,_e)},[()=>J(e.video_data.current_time,!1),()=>J(e.video_data.duration,!1),()=>J(e.video_data.start_progress*e.video_data.duration,!1),()=>J(e.video_data.end_progress*e.video_data.duration,!1),()=>J((e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration,!1),()=>({"bd-accent":t(n)}),()=>({"bd-accent":t(l)})]),g(a,d),T()}ye(["click"]);const dt=["NW","N","NE","W","E","SW","S","SE"],Sr="#000000E6",Q=12,ct=64;function Re(){return{enabled:t(wt),x:t(Ne)?.origin.x||0,y:t(Ne)?.origin.y||0,width:t(Ne)?.width||0,height:t(Ne)?.height||0}}let Ne=S(null),wt=S(!1);function Or(a,e,r,o,n,l){if(!t(e))return;const s=t(e).getBoundingClientRect(),d=a.clientX-s.left,u=a.clientY-s.top,i=r({x:d,y:u});if(i){i==="surface"?(t(e).style.cursor="move",h(o,{x:d,y:u},!0)):t(e).style.cursor=`${i}-resize`,h(n,!0),h(l,i,!0);return}}var Nr=F('<canvas class="svelte-1frae8d"></canvas> <div><code> </code></div>',1);function Fr(a,e){C(e,!0);let r=S(null),o=S(re({width:0,height:0})),n=S(re({width:0,height:0})),l=S(!1),s=S(!1),d=S(re({x:0,y:0})),u=S("NW"),i=S(re({p0:{x:0,y:0},p1:{x:t(o).width,y:t(o).height}}));He(()=>{window.addEventListener("resize",m)}),ce(()=>{e.video&&e.video.addEventListener("loadedmetadata",m)}),ce(()=>{h(Ne,t(v),!0),h(wt,t(v).width<t(n).width||t(v).height<t(n).height,!0)});let v=ge(()=>{if(!t(r)||!e.video)return{origin:{x:0,y:0},width:0,height:0};const c=e.video.videoWidth/e.video.offsetWidth,M=Math.min(Math.round((t(i).p1.x-t(i).p0.x)*c),t(n).width),N=Math.min(Math.round((t(i).p1.y-t(i).p0.y)*c),t(n).height);return{origin:{x:Math.round(t(i).p0.x*c),y:Math.round(t(i).p0.y*c)},width:M,height:N}});function m(){!t(r)||!e.video||(h(o,{width:e.video.offsetWidth,height:e.video.offsetHeight},!0),h(n,{width:e.video.videoWidth,height:e.video.videoHeight},!0),h(i,{p0:{x:0,y:0},p1:{x:t(o).width,y:t(o).height}},!0))}function y(){if(!t(r))return;const c=t(r).getContext("2d");c&&(c.clearRect(0,0,t(o).width,t(o).height),E(c),t(s)&&(x(c),O(c)))}function E(c){c.fillStyle=Sr,c.fillRect(0,0,t(i).p0.x,t(i).p0.y),c.fillRect(t(i).p0.x,0,t(i).p1.x-t(i).p0.x,t(i).p0.y),c.fillRect(t(i).p1.x,0,t(o).width-t(i).p1.x,t(i).p0.y),c.fillRect(0,t(i).p0.y,t(i).p0.x,t(i).p1.y-t(i).p0.y),c.fillRect(t(i).p1.x,t(i).p0.y,t(o).width-t(i).p1.x,t(i).p1.y-t(i).p0.y),c.fillRect(0,t(i).p1.y,t(i).p0.x,t(o).height-t(i).p1.y),c.fillRect(t(i).p0.x,t(i).p1.y,t(i).p1.x-t(i).p0.x,t(o).height-t(i).p1.y),c.fillRect(t(i).p1.x,t(i).p1.y,t(o).width-t(i).p1.x,t(o).height-t(i).p1.y)}function x(c){c.strokeStyle="#FFF",c.lineWidth=2,c.strokeRect(t(i).p0.x,t(i).p0.y,t(i).p1.x-t(i).p0.x,t(i).p1.y-t(i).p0.y),c.strokeStyle="#111",c.lineWidth=2,c.strokeRect(t(i).p0.x+2,t(i).p0.y+2,t(i).p1.x-t(i).p0.x-4,t(i).p1.y-t(i).p0.y-4)}function O(c){if(!t(r))return;c.fillStyle="#FFF",c.strokeStyle="#111",c.lineWidth=1;const M=R();for(const N of dt){const b=M[N];c.fillRect(b.x,b.y,Q,Q),c.strokeRect(b.x,b.y,Q,Q)}}ce(()=>{!t(r)||!t(r).getContext("2d")||y()});function R(){const c=t(i).p1.x-t(i).p0.x,M=t(i).p1.y-t(i).p0.y,N=t(i).p0.x+c/2-Q/2,b=t(i).p0.y+M/2-Q/2;return{NW:{x:t(i).p0.x,y:t(i).p0.y},N:{x:N,y:t(i).p0.y},NE:{x:t(i).p1.x-Q,y:t(i).p0.y},W:{x:t(i).p0.x,y:b},E:{x:t(i).p1.x-Q,y:b},SW:{x:t(i).p0.x,y:t(i).p1.y-Q},S:{x:N,y:t(i).p1.y-Q},SE:{x:t(i).p1.x-Q,y:t(i).p1.y-Q}}}function I({x:c,y:M}){const N=R();for(const b of dt){const k=N[b];if(c>=k.x&&c<=k.x+Q&&M>=k.y&&M<=k.y+Q)return b}return c>=t(i).p0.x&&c<=t(i).p1.x&&M>=t(i).p0.y&&M<=t(i).p1.y?"surface":null}function z(c){!t(r)||!t(l)||(t(r).style.cursor="auto",h(l,!1))}function V(c){if(!t(r))return;if(!t(l)){const w=t(r).getBoundingClientRect(),B=c.clientX-w.left,P=c.clientY-w.top,q=I({x:B,y:P});q?q==="surface"?(t(r).style.cursor="move",h(s,!0)):(t(r).style.cursor=`${q}-resize`,h(s,!1)):(t(r).style.cursor="auto",h(s,!1));return}const M=t(r).getBoundingClientRect(),N=c.clientX-M.left,b=c.clientY-M.top;if(t(u)==="surface"){const w=N-t(d).x,B=b-t(d).y,P={p0:{x:t(i).p0.x+w,y:t(i).p0.y+B},p1:{x:t(i).p1.x+w,y:t(i).p1.y+B}};P.p0.x>0&&P.p1.x<t(o).width&&(t(i).p0.x=P.p0.x,t(i).p1.x=P.p1.x),P.p0.y>0&&P.p1.y<t(o).height&&(t(i).p0.y=P.p0.y,t(i).p1.y=P.p1.y),h(d,{x:N,y:b},!0)}else{let w={p0:{...t(i).p0},p1:{...t(i).p1}};t(u).includes("N")?w.p0.y=Math.max(0,Math.min(t(i).p1.y,b)):t(u).includes("S")&&(w.p1.y=Math.min(t(o).height,Math.max(t(i).p0.y,b))),w.p1.y-w.p0.y>=ct&&(t(i).p0.y=w.p0.y,t(i).p1.y=w.p1.y),t(u).includes("W")?w.p0.x=Math.max(0,Math.min(t(i).p1.x,N)):t(u).includes("E")&&(w.p1.x=Math.min(t(o).width,Math.max(t(i).p0.x,N))),w.p1.x-w.p0.x>=ct&&(t(i).p0.x=w.p0.x,t(i).p1.x=w.p1.x)}t(r).getContext("2d")&&y()}function ee(){t(l)||h(s,!1)}var A=Nr();oe("mouseup",Be,z),oe("mousemove",Be,V);var j=U(A);j.__mousedown=[Or,r,I,d,l,u],Ue(j,c=>h(r,c),()=>t(r));var Z=p(j,2),G=_(Z),L=_(G);f(G),f(Z),W(()=>{$(j,"width",t(o).width),$(j,"height",t(o).height),H(L,`Cropped: ${t(v).width??""} x ${t(v).height??""} - Original: ${t(n).width??""} x ${t(n).height??""}`)}),oe("mouseenter",j,onmouseenter),oe("mouseleave",j,ee),g(a,A),T()}ye(["mousedown"]);var Ir=F("<li> </li>"),Ur=F('<div class="flash muted"><ul><p><b>Log</b></p> <!></ul></div>');function yt(a,e){C(e,!0);const r=()=>(e.ffmpeg_manager.is_loaded()&&e.message_manager.toggle_ffmpeg_listen(!0,e.ffmpeg_manager),()=>{e.message_manager.toggle_ffmpeg_listen(!1,e.ffmpeg_manager)});var o=Ur(),n=_(o),l=p(_(n),2);Me(l,17,()=>Object.values(e.message_manager.messages),Ie,(s,d)=>{var u=Ir();let i;var v=_(u,!0);f(u),W(m=>{i=Fe(u,1,"svelte-w19oiv",null,i,m),H(v,t(d).message)},[()=>({error:t(d).error})]),g(s,u)}),f(n),f(o),Kt(o,()=>r),g(a,o),T()}let xt={};const ut=new WeakMap,ft={metric:[{from:0,to:1e3,unit:"B",long:"bytes"},{from:1e3,to:1e6,unit:"kB",long:"kilobytes"},{from:1e6,to:1e9,unit:"MB",long:"megabytes"},{from:1e9,to:1e12,unit:"GB",long:"gigabytes"},{from:1e12,to:1e15,unit:"TB",long:"terabytes"},{from:1e15,to:1e18,unit:"PB",long:"petabytes"},{from:1e18,to:1e21,unit:"EB",long:"exabytes"},{from:1e21,to:1e24,unit:"ZB",long:"zettabytes"},{from:1e24,to:1e27,unit:"YB",long:"yottabytes"}],metric_octet:[{from:0,to:1e3,unit:"o",long:"octets"},{from:1e3,to:1e6,unit:"ko",long:"kilooctets"},{from:1e6,to:1e9,unit:"Mo",long:"megaoctets"},{from:1e9,to:1e12,unit:"Go",long:"gigaoctets"},{from:1e12,to:1e15,unit:"To",long:"teraoctets"},{from:1e15,to:1e18,unit:"Po",long:"petaoctets"},{from:1e18,to:1e21,unit:"Eo",long:"exaoctets"},{from:1e21,to:1e24,unit:"Zo",long:"zettaoctets"},{from:1e24,to:1e27,unit:"Yo",long:"yottaoctets"}],iec:[{from:0,to:Math.pow(1024,1),unit:"B",long:"bytes"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"KiB",long:"kibibytes"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"MiB",long:"mebibytes"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"GiB",long:"gibibytes"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"TiB",long:"tebibytes"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"PiB",long:"pebibytes"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"EiB",long:"exbibytes"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"ZiB",long:"zebibytes"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"YiB",long:"yobibytes"}],iec_octet:[{from:0,to:Math.pow(1024,1),unit:"o",long:"octets"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"Kio",long:"kibioctets"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"Mio",long:"mebioctets"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"Gio",long:"gibioctets"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"Tio",long:"tebioctets"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"Pio",long:"pebioctets"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"Eio",long:"exbioctets"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"Zio",long:"zebioctets"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"Yio",long:"yobioctets"}]};class Dr{constructor(e,r){r=Object.assign({units:"metric",precision:1,locale:void 0},xt,r),ut.set(this,r),Object.assign(ft,r.customUnits);const o=e<0?"-":"";e=Math.abs(e);const n=ft[r.units];if(n){const l=n.find(s=>e>=s.from&&e<s.to);if(l){const s=new Intl.NumberFormat(r.locale,{style:"decimal",maximumFractionDigits:r.precision}),d=l.from===0?o+s.format(e):o+s.format(e/l.from);this.value=d,this.unit=l.unit,this.long=l.long}else this.value=o+e,this.unit="",this.long=""}else throw new Error(`Invalid units specified: ${r.units}`)}toString(){const e=ut.get(this);return e.toStringFn?e.toStringFn.bind(this)():`${this.value} ${this.unit}`}}function Le(a,e){return new Dr(a,e)}Le.defaultOptions=function(a){xt=a};var Ar=F('<div class="flash danger"><p><!> </p></div>'),Br=F(`<div class="flash danger"><p><!> Estimated file size too large: <code> </code>. Reduce either duration or
			bitrate.</p></div>`),Cr=F("<!> <!>",1);function Tr(a,e){C(e,!0);const r=120,o=4096*1024;let n=ge(()=>{if(!e.export_settings.settings||!e.export_settings.settings.bitrate)return 0;const v=e.export_settings.settings.bitrate;return(e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration*v*1e3/8});var l=Cr(),s=U(l);{var d=v=>{var m=Ar(),y=_(m),E=_(y);lt(E,{style:"vertical-align:text-bottom;"});var x=p(E);f(y),f(m),W(O=>H(x,` Duration too long: Current: ${O??""} seconds, Limit: 120 seconds`),[()=>((e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration).toFixed(2)]),g(v,m)};X(s,v=>{(e.video_data.end_progress-e.video_data.start_progress)*e.video_data.duration>r&&v(d)})}var u=p(s,2);{var i=v=>{var m=Br(),y=_(m),E=_(y);lt(E,{style:"vertical-align:text-bottom;"});var x=p(E,2),O=_(x);f(x),pe(),f(y),f(m),W((R,I)=>H(O,`${R??""}/${I??""}`),[()=>Le(t(n)),()=>Le(o)]),g(v,m)};X(u,v=>{t(n)>o&&v(i)})}g(a,l),T()}const Pr=["none","film","animation","stillimage","zerolatency"],Wr=["None","Film","Animation","Still Image","Zero Latency"],zr=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow"],jr=["Ultra Fast","Super Fast","Very Fast","Faster","Fast","Medium","Slow","Slower","Very Slow"],Xr=/\[sound=(?<url>.*)]/,Vr=["jpg","jpeg","png","gif"],Gr=["mp4","webm","mkv"],Yr=["mp3","wav","ogg"];function _t(a){const e=a.match(Xr);let r=null;return e&&e.groups&&e.groups.url&&(r=decodeURIComponent(e.groups.url),r.startsWith("http")||(r="https://"+r)),r}function Ge(a){const e=a.split(".").pop()?.toLowerCase();if(e){if(Vr.includes(e))return"image";if(Gr.includes(e))return"video";if(Yr.includes(e))return"audio"}return"unknown"}function kt(a){return Ge(a)==="image"}function Hr(a){return a.replaceAll(/\[.+?\]/g,"").split(".")[0].trim()}var Zr=F("<option> </option>"),qr=F("<option> </option>"),Kr=F(`<fieldset><legend>Preset</legend> <p>Slower will yield higher quality encodes.</p> <select></select></fieldset> <fieldset><legend>Tune</legend> <p>Optimize the output for specific content types. <br/>Pick <i>Still Image</i> if your input is
				an image file.</p> <select></select></fieldset>`,1),Jr=F('<div class="flash bd-muted"><p><b>FFmpeg settings</b></p> <fieldset><legend>Output format</legend> <p>MP4 highly recommended.</p> <div><label><input type="radio" name="output_format"/> MP4 (H.264)</label> <label><input type="radio" name="output_format"/> WebM (VP8 + 256k Vorbis)</label></div></fieldset> <fieldset><legend>Target Bitrate</legend> <input name="bitrate_range" type="range" min="256" max="16384" step="256"/> <label for="bitrate_range"> </label></fieldset> <!></div>');function Et(a,e){C(e,!0);const r=[];let o=ne(e,"export_settings",15),n=S("fast"),l=S(2048),s=S("mp4"),d=ge(()=>kt(e.file_name)?"stillimage":"none");ce(()=>{o()&&(t(s)==="mp4"?o(o().settings={preset:t(n),tune:t(d),bitrate:t(l)},!0):t(s)==="webm"&&o(o().settings={bitrate:t(l)},!0),o(o().output_format=t(s),!0))});var u=Jr(),i=p(_(u),2),v=p(_(i),4),m=_(v),y=_(m);Ae(y),y.value=y.__value="mp4",pe(),f(m);var E=p(m,2),x=_(E);Ae(x),x.value=x.__value="webm",pe(),f(E),f(v),f(i);var O=p(i,2),R=p(_(O),2);Ae(R);var I=p(R,2),z=_(I);f(I),f(O);var V=p(O,2);{var ee=A=>{var j=Kr(),Z=U(j),G=p(_(Z),4);Me(G,21,()=>zr,Ie,(M,N,b)=>{var k=Zr(),w=_(k,!0);f(k);var B={};W(()=>{at(k,t(n)===t(N)),H(w,jr[b]),B!==(B=t(N))&&(k.value=(k.__value=t(N))??"")}),g(M,k)}),f(G),f(Z);var L=p(Z,2),c=p(_(L),4);Me(c,21,()=>Pr,Ie,(M,N,b)=>{var k=qr(),w=_(k,!0);f(k);var B={};W(()=>{at(k,t(d)===t(N)),H(w,Wr[b]),B!==(B=t(N))&&(k.value=(k.__value=t(N))??"")}),g(M,k)}),f(c),f(L),ot(G,()=>t(n),M=>h(n,M)),ot(c,()=>t(d),M=>h(d,M)),g(A,j)};X(V,A=>{t(s)==="mp4"&&A(ee)})}f(u),W(A=>H(z,`Up to ${A??""}/s`),[()=>Le(t(l)*1e3/8)]),nt(r,[],y,()=>t(s),A=>h(s,A)),nt(r,[],x,()=>t(s),A=>h(s,A)),Qt(R,()=>t(l),A=>h(l,A)),g(a,u),T()}var D;(function(a){a.LOAD="LOAD",a.EXEC="EXEC",a.FFPROBE="FFPROBE",a.WRITE_FILE="WRITE_FILE",a.READ_FILE="READ_FILE",a.DELETE_FILE="DELETE_FILE",a.RENAME="RENAME",a.CREATE_DIR="CREATE_DIR",a.LIST_DIR="LIST_DIR",a.DELETE_DIR="DELETE_DIR",a.ERROR="ERROR",a.DOWNLOAD="DOWNLOAD",a.PROGRESS="PROGRESS",a.LOG="LOG",a.MOUNT="MOUNT",a.UNMOUNT="UNMOUNT"})(D||(D={}));const Qr=(()=>{let a=0;return()=>a++})(),$r=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),ea=new Error("called FFmpeg.terminate()");class ta{#e=null;#a={};#r={};#o=[];#n=[];loaded=!1;#i=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:r,data:o}})=>{switch(r){case D.LOAD:this.loaded=!0,this.#a[e](o);break;case D.MOUNT:case D.UNMOUNT:case D.EXEC:case D.FFPROBE:case D.WRITE_FILE:case D.READ_FILE:case D.DELETE_FILE:case D.RENAME:case D.CREATE_DIR:case D.LIST_DIR:case D.DELETE_DIR:this.#a[e](o);break;case D.LOG:this.#o.forEach(n=>n(o));break;case D.PROGRESS:this.#n.forEach(n=>n(o));break;case D.ERROR:this.#r[e](o);break}delete this.#a[e],delete this.#r[e]})};#t=({type:e,data:r},o=[],n)=>this.#e?new Promise((l,s)=>{const d=Qr();this.#e&&this.#e.postMessage({id:d,type:e,data:r},o),this.#a[d]=l,this.#r[d]=s,n?.addEventListener("abort",()=>{s(new DOMException(`Message # ${d} was aborted`,"AbortError"))},{once:!0})}):Promise.reject($r);on(e,r){e==="log"?this.#o.push(r):e==="progress"&&this.#n.push(r)}off(e,r){e==="log"?this.#o=this.#o.filter(o=>o!==r):e==="progress"&&(this.#n=this.#n.filter(o=>o!==r))}load=({classWorkerURL:e,...r}={},{signal:o}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("../workers/worker-BAOIWoxA.js",import.meta.url).href,import.meta.url),{type:"module"}),this.#i()),this.#t({type:D.LOAD,data:r},void 0,o));exec=(e,r=-1,{signal:o}={})=>this.#t({type:D.EXEC,data:{args:e,timeout:r}},void 0,o);ffprobe=(e,r=-1,{signal:o}={})=>this.#t({type:D.FFPROBE,data:{args:e,timeout:r}},void 0,o);terminate=()=>{const e=Object.keys(this.#r);for(const r of e)this.#r[r](ea),delete this.#r[r],delete this.#a[r];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,r,{signal:o}={})=>{const n=[];return r instanceof Uint8Array&&n.push(r.buffer),this.#t({type:D.WRITE_FILE,data:{path:e,data:r}},n,o)};mount=(e,r,o)=>{const n=[];return this.#t({type:D.MOUNT,data:{fsType:e,options:r,mountPoint:o}},n)};unmount=e=>{const r=[];return this.#t({type:D.UNMOUNT,data:{mountPoint:e}},r)};readFile=(e,r="binary",{signal:o}={})=>this.#t({type:D.READ_FILE,data:{path:e,encoding:r}},void 0,o);deleteFile=(e,{signal:r}={})=>this.#t({type:D.DELETE_FILE,data:{path:e}},void 0,r);rename=(e,r,{signal:o}={})=>this.#t({type:D.RENAME,data:{oldPath:e,newPath:r}},void 0,o);createDir=(e,{signal:r}={})=>this.#t({type:D.CREATE_DIR,data:{path:e}},void 0,r);listDir=(e,{signal:r}={})=>this.#t({type:D.LIST_DIR,data:{path:e}},void 0,r);deleteDir=(e,{signal:r}={})=>this.#t({type:D.DELETE_DIR,data:{path:e}},void 0,r)}var vt;(function(a){a.MEMFS="MEMFS",a.NODEFS="NODEFS",a.NODERAWFS="NODERAWFS",a.IDBFS="IDBFS",a.WORKERFS="WORKERFS",a.PROXYFS="PROXYFS"})(vt||(vt={}));class Rt{current_id=0;ids=[];ffmpeg_process_id=0;#e=S(re({}));get messages(){return t(this.#e)}set messages(e){h(this.#e,e,!0)}log(e,r){this.add_message({message:e,error:!1},r)}error(e,r){this.add_message({message:`Error: ${e}`,error:!0},r)}add_message(e,r){r||(r=`message_${this.current_id}`,this.current_id+=1),this.ids.includes(r)||this.ids.push(r),this.messages={...this.messages,[r]:e},e.error?console.error(`${e.message} (${r})`):console.log(`${e.message} (${r})`)}reset(){this.current_id=0,this.ids=[],this.messages={},this.ffmpeg_process_id=0}bump_ffmpeg_process_id(){this.ffmpeg_process_id+=1}listen_ffmpeg_message=e=>{let r=`FFmpeg [${e.type}]: ${e.message}`;this.log(r,`ffmpeg_message_${this.ffmpeg_process_id}`)};listen_ffmpeg_progress=e=>{const r=e.progress*100;this.log(`FFmpeg [progress]: ${r.toFixed(2)}%`,`ffmpeg_progress_${this.ffmpeg_process_id}`)};toggle_ffmpeg_listen(e,r){r.manage_listeners(e,this.listen_ffmpeg_message,this.listen_ffmpeg_progress)}}const ra=""+new URL("../assets/ffmpeg-core.CI9Irx9p.js",import.meta.url).href,aa=""+new URL("../assets/ffmpeg-core.CgUfceKH.wasm",import.meta.url).href;class Mt{ffmpeg_instance=null;ffmpeg_loaded=!1;get_instance(){return this.ffmpeg_instance}is_loaded(){return this.ffmpeg_loaded}async init(){if(!this.ffmpeg_loaded)try{this.ffmpeg_instance=new ta,await this.ffmpeg_instance.load({coreURL:ra,wasmURL:aa}),console.log("FFmpeg loaded successfully."),this.ffmpeg_loaded=!0}catch(e){throw console.error("Failed to load FFmpeg:",e),e}}manage_listeners(e,r,o){if(!this.ffmpeg_instance){console.error("FFmpeg is not initialized.");return}const n=e?"on":"off";this.ffmpeg_instance[n]("log",r),this.ffmpeg_instance[n]("progress",o)}}const oa=a=>new Promise((e,r)=>{const o=new FileReader;o.onload=()=>{const{result:n}=o;n instanceof ArrayBuffer?e(new Uint8Array(n)):e(new Uint8Array)},o.onerror=n=>{r(Error(`File could not be read! Code=${n?.target?.error?.code||-1}`))},o.readAsArrayBuffer(a)}),Ye=async a=>{let e;if(typeof a=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(a)?e=atob(a.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(a)).arrayBuffer();else if(a instanceof URL)e=await(await fetch(a)).arrayBuffer();else if(a instanceof File||a instanceof Blob)e=await oa(a);else return new Uint8Array;return new Uint8Array(e)};function na(a,e,r){const o=a.settings,n=ia(e,r);return kt(e.name)&&sa(n),a.trim&&da(n,a.trim),ca(n,o),la(n,a),ua(n),n}function ia(a,e){const r=["-i",a.name];return e&&(r.push("-i",e.name),r.push("-map","1:a:0")),r.push("-map","0:v:0"),r}function sa(a){a.unshift("-loop","1","-r","1"),a.push("-shortest","-r","1")}function la(a,e){const r=[];e.crop.enabled&&r.push(`crop=${e.crop.width}:${e.crop.height}:${e.crop.x}:${e.crop.y}`),e.scale_down?r.push("scale=w=2048:h=2048:force_original_aspect_ratio=decrease:force_divisible_by=2"):r.push("pad=ceil(iw/2)*2:ceil(ih/2)*2"),r.length>0&&a.push("-vf",r.join(","))}function da(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",J(r)),a.push("-ss",J(o)),a.push("-t",J(e.end-e.start))}function ca(a,e){a.push("-c:v","libx264","-preset",e.preset),e.tune!=="none"&&a.push("-tune",e.tune),e.bitrate&&a.push("-b:v",`${e.bitrate}k`)}function ua(a){a.push("-pix_fmt:v","yuv420p","output.mp4")}function fa(a,e,r){const o=a.settings,n=r&&a.remove_audio===!1,l=_a(e);return n&&va(l,r),a.trim&&ma(l,a.trim),ga(l,o),ha(l,a),n&&pa(l),ba(l),l}function _a(a){return["-i",a.name,"-map","0:v:0"]}function va(a,e){a.push("-i",e.name,"-map","1:a:0")}function ma(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",J(r)),a.push("-ss",J(o)),a.push("-t",J(e.end-e.start))}function ha(a,e){const r=[];e.crop.enabled&&r.push(`crop=${e.crop.width}:${e.crop.height}:${e.crop.x}:${e.crop.y}`),e.scale_down&&r.push("scale=w=2048:h=2048:force_original_aspect_ratio=decrease"),r.length>0&&a.push("-vf",r.join(","))}function ga(a,e){a.push("-c:v","libvpx","-crf","10","-b:v",`${e.bitrate}k`)}function pa(a){a.push("-c:a","libvorbis","-b:a","256k")}function ba(a){a.push("output.webm")}function wa(a,e){const r=ya(e);return a.trim&&xa(r,a.trim),ka(r),Ea(r),r}function ya(a){return["-i",a.name,"-map","0:a:0"]}function xa(a,e){const r=Math.floor(.9*e.start),o=e.start-r;a.unshift("-ss",J(r)),a.push("-ss",J(o)),a.push("-t",J(e.end-e.start))}function ka(a){a.push("-c:a","libvorbis","-b:a","256k")}function Ea(a){a.push("output.ogg")}function Lt(a,e,r){switch(a.output_format){case"mp4":return na(a,e,r);case"webm":return fa(a,e,r);case"ogg":return wa(a,e);default:throw new Error(`Unsupported output format: ${a.output_format}`)}}async function mt(a,e,r,o,n){o.log("Writing input file to ffmpeg..."),await a.writeFile(e.name,await Ye(e.blob));const l=Lt(r,e);o.log("ffmpeg "+l.join(" ")),await a.exec(l),o.bump_ffmpeg_process_id(),o.log("Reading output...");const d=await a.readFile(`output.${r.output_format}`);return new Blob([d],{type:`${n}/${r.output_format}`})}const ht={progress:0,current_time:0,duration:0,start_progress:0,end_progress:1};var Ra=F(`<div class="flash accent"><p><!> The cropped video exceeds the maximum resolution of 2048x2048 pixels and will be scaled
					down.</p></div>`),Ma=(a,e)=>{e()},La=F('<section class="flash px-2 bd-muted"><div class="media-container"><video>Your browser does not support the video tag.</video> <!></div> <section><!> <!></section></section> <div class="flash bd-muted"><label><input type="checkbox" name="upload_audio"/> Upload audio file to catbox.moe</label></div> <!> <!> <!> <button type="submit">Split</button>',3),Sa=F(`<p>Filename: <code> </code></p> <p><small>Some browsers won't let you download files that contain '%' in the name. In that
							case, please copy and paste this filename.</small></p>`,1),Oa=F("<p><b>Extracted audio</b></p> <audio controls></audio>",1),Na=F('<div class="flash bd-muted"><p><b>Video result</b></p> <video controls></video> <a title="Download processedvideo"><button>Download</button></a></div> <div class="flash bd-muted"><!></div>',3),Fa=F("<!> <!>",1),Ia=F(`<div class="flash bg-muted bd-muted"><p><b class="default">Instructions</b></p> <p>Upload a video, trim it and crop it.<br/>This tool will then split the audio and video into
			separate files.<br/> The audio file will automatically be uploaded to one of several hosts, with the URL embedded in
			the video's filename.</p></div>`),Ua=F("<!> <!>",1);function Da(a,e){C(e,!0);let r=S(null),o=S(null),n=S(re(ht)),l=S(!1);const s=new Rt,d=new Mt;let u=S("ready"),i=S(!0),v=S(re({output_format:"mp4",settings:{preset:"fast",tune:"none",bitrate:2048},crop:Re()})),m=S(re({name:"",blob:new Blob})),y=S(re({name:"",blob:new Blob}));He(()=>{setInterval(function(){I(new Event("ontimeupdate"))},1/24*1e3),d.init()}),ce(()=>{t(r)&&(h(n,ht,!0),h(u,"ready"))});function E(L,c=!1){t(n).start_progress=L,t(n).start_progress>t(n).end_progress&&(t(n).end_progress=t(n).start_progress+.05),t(o)&&(c&&(t(o).currentTime=L*t(o).duration,h(l,!0)),t(n).progress<t(n).start_progress&&(t(n).progress=t(n).start_progress))}function x(L,c=!1){t(n).end_progress=L,t(n).end_progress<t(n).start_progress&&(t(n).start_progress=t(n).end_progress-.05),t(o)&&(c&&(t(o).currentTime=L*t(o).duration,h(l,!0)),t(n).progress>t(n).end_progress&&(t(n).progress=t(n).end_progress))}function O(L){t(o)&&(isNaN(t(o).duration)||(L<t(n).start_progress?t(n).progress=t(n).start_progress:L>t(n).end_progress&&(t(n).progress=t(n).end_progress),t(o).currentTime=L*t(o).duration,h(l,!1)))}function R(){t(o)&&(t(n).duration=t(o).duration)}function I(L){if(t(o)){if(t(l)){h(l,!1);return}t(n).progress=t(o).currentTime/t(o).duration,t(n).current_time=t(o).currentTime,t(n).progress<t(n).start_progress-.01?t(o).currentTime=t(n).start_progress*t(o).duration:t(n).progress>t(n).end_progress&&(t(o).loop?t(o).currentTime=t(n).start_progress*t(o).duration:(t(o).pause(),t(o).currentTime=t(n).end_progress*t(o).duration))}}async function z(L){const c=new FormData;c.append("reqtype","fileupload"),c.append("fileToUpload",L),s.log(`Uploading audio: ${L.name}...`);try{const M=await fetch("https://catbox.moe/user/api.php",{method:"POST",body:c});if(!M.ok)throw new Error(`Status: ${M.status}`);let N=await M.text();return s.log(N,"upload_audio_response"),N}catch(M){return console.error(M),null}}async function V(){s.reset(),h(u,"loading"),s.log("Splitting audio and video...");const L=d.get_instance();if(!L){s.error("FFmpeg instance is not available.");return}if(!t(r)){s.error("No file selected.");return}let c="";const M=await mt(L,{name:t(r).name,blob:t(r)},{output_format:"ogg",trim:{start:t(n).start_progress*t(n).duration,end:t(n).end_progress*t(n).duration},crop:Re()},s,"audio").catch(w=>(s.error(w.message),null));if(!M){s.error("Failed to extract audio from video file.");return}if(h(y,{name:"sound.ogg",blob:M},!0),t(i)){let w=await z(new File([M],"extracted_audio.ogg"));if(!w){s.error("Failed to upload audio file.");return}c=encodeURIComponent(w)}const N=Re();N&&(t(v).crop=N);const b=await mt(L,{name:t(r).name,blob:t(r)},{...t(v),trim:{start:t(n).start_progress*t(n).duration,end:t(n).end_progress*t(n).duration},crop:Re()},s,"video").catch(w=>(s.error(w.message),null));if(!b){s.error("Failed to process video file.");return}const k=t(r).name.replace(/\.[^/.]+$/,"")+(c?`[sound=${c}]`:"");h(m,{name:k,blob:b},!0),s.log("Audio and video split successfully."),s.log(`Final video: ${t(m).name} (${t(m).blob.size} bytes)`),h(u,"finished")}var ee=Ua(),A=U(ee);bt(A,{accept_image:!1,show_preview:!1,get current_file(){return t(r)},set current_file(L){h(r,L,!0)}});var j=p(A,2);{var Z=L=>{var c=Y(),M=U(c);{var N=k=>{var w=La(),B=U(w),P=_(B),q=_(P);Ue(q,K=>h(o,K),()=>t(o));var _e=p(q,2);Fr(_e,{get video(){return t(o)}}),f(P);var me=p(P,2),ve=_(me);sr(ve,{get video_data(){return t(n)},on_seek:O,on_start_seek:E,on_end_seek:x});var be=p(ve,2);Lr(be,{get video(){return t(o)},get video_data(){return t(n)}}),f(me),f(B);var he=p(B,2),we=_(he),xe=_(we);Ae(xe),pe(),f(we),f(he);var ke=p(he,2);{var Pe=K=>{var Se=Ra(),Ze=_(Se),St=_(Ze);fr(St,{}),pe(),f(Ze),f(Se),g(K,Se)};X(ke,K=>{(Re().width>2048||Re().height>2048)&&K(Pe)})}var ae=p(ke,2);Tr(ae,{get video_data(){return t(n)},get export_settings(){return t(v)}});var de=p(ae,2);Et(de,{get file_name(){return t(r).name},get export_settings(){return t(v)},set export_settings(K){h(v,K,!0)}});var Ee=p(de,2);Ee.__click=[Ma,V],W(K=>$(q,"src",K),[()=>URL.createObjectURL(t(r))]),oe("durationchange",q,R),oe("resize",q,onresize),$t(xe,()=>t(i),K=>h(i,K)),g(k,w)},b=k=>{var w=Fa(),B=U(w);yt(B,{get message_manager(){return s},get ffmpeg_manager(){return d}});var P=p(B,2);{var q=_e=>{var me=Na(),ve=U(me),be=p(_(ve),2),he=p(be,2);f(ve);var we=p(ve,2),xe=_(we);{var ke=ae=>{var de=Sa(),Ee=U(de),K=p(_(Ee)),Se=_(K);f(K),f(Ee),pe(2),W(()=>H(Se,`${t(m).name??""}.${t(v).output_format??""}`)),g(ae,de)},Pe=ae=>{var de=Oa(),Ee=p(U(de),2);W(K=>$(Ee,"src",K),[()=>URL.createObjectURL(t(y).blob)]),g(ae,de)};X(xe,ae=>{t(i)?ae(ke):ae(Pe,!1)})}f(we),W((ae,de)=>{$(be,"src",ae),$(he,"href",de),$(he,"download",`${t(m).name}.${t(v).output_format}`)},[()=>URL.createObjectURL(t(m).blob),()=>URL.createObjectURL(t(m).blob)]),g(_e,me)};X(P,_e=>{t(u)==="finished"&&_e(q)})}g(k,w)};X(M,k=>{t(u)==="ready"?k(N):k(b,!1)})}g(L,c)},G=L=>{var c=Ia();g(L,c)};X(j,L=>{t(r)?L(Z):L(G,!1)})}g(a,ee),T()}ye(["click"]);var Aa=F("<video controls><source/> Your browser does not support the video tag.</video>",2),Ba=F('<img alt="Selected image"/>'),Ca=F('<div class="flash bd-muted"><p><b>Preview</b></p> <p><code> </code></p> <!></div>');function gt(a,e){C(e,!0);var r=Y(),o=U(r);{var n=l=>{var s=Ca(),d=p(_(s),2),u=_(d),i=_(u);f(u),f(d);var v=p(d,2);{var m=E=>{var x=Aa(),O=_(x);pe(),f(x),W(R=>{$(O,"src",R),$(O,"type",e.current_file.type)},[()=>URL.createObjectURL(e.current_file)]),g(E,x)},y=E=>{var x=Y(),O=U(x);{var R=I=>{var z=Ba();W(V=>$(z,"src",V),[()=>URL.createObjectURL(e.current_file)]),g(I,z)};X(O,I=>{Ge(e.current_file.name)==="image"&&I(R)},!0)}g(E,x)};X(v,E=>{Ge(e.current_file.name)==="video"?E(m):E(y,!1)})}f(s),W(E=>H(i,`Original size: ${E??""}`),[()=>Le(e.current_file.size,{units:"iec"})]),g(l,s)};X(o,l=>{e.current_file&&l(n)})}g(a,r),T()}async function Ta(a,e){const r=await fetch(a);if(!r.ok)throw new Error(`Failed to download file: ${r.statusText}`);const o=r.headers.get("Content-Length");if(!o)throw new Error("Unable to determine file size for progress tracking.");const n=parseInt(o,10);let l=0;const s=r.body?.getReader(),d=[];if(!s)throw new Error("Failed to read response body.");for(;;){const{done:i,value:v}=await s.read();if(i)break;if(v){d.push(v),l+=v.length;const m=l/n*100;e(m)}}return new Blob(d)}async function Pa(a,e,r,o,n){n.log("Merging video and audio..."),n.log("Writing input files to ffmpeg..."),await a.writeFile(e.name,await Ye(e.blob)),await a.writeFile(r.name,await Ye(r.blob));const l=Lt(o,e,r);n.log("ffmpeg "+l.join(" ")),await a.exec(l),n.bump_ffmpeg_process_id(),n.log("Reading output...");const d=await a.readFile(`output.${o.output_format}`);return new Blob([d],{type:`video/${o.output_format}`})}var Wa=(a,e)=>e(),za=F('<!> <div><!> <button type="submit">Merge</button></div>',1),ja=F('<div class="flash bd-accent"><p><b>Output</b></p> <p><code> </code></p> <video controls></video> <p class="centered"><a><button>Download</button></a></p></div>',2),Xa=F("<!> <!>",1),Va=F('<p class="flash danger icon"><!> Cannot find sound URL / invalid sound URL in file <code class="bd-danger"> </code>.</p> <!>',1),Ga=F(`<div class="flash bg-muted bd-muted"><p><b>Instructions</b></p> <p>Upload a .webm file containing a [sound=URL] link in the filename.<br/> Example: <code>video[sound=https://example.com/sound.mp3].webm</code><br/> This tool
			downloads the linked sound file and merges it back into the video file for easy viewing.<br/>This is also useful for archival in case the file hosts go down.</p></div>`),Ya=F("<!> <!>",1);function Ha(a,e){C(e,!0);let r=S(re(new Blob));const o=new Rt,n=new Mt;let l=S("ready"),s=S(null),d=S(re({output_format:"mp4",settings:{preset:"fast",tune:"none",bitrate:2048},crop:{enabled:!1,x:0,y:0,width:0,height:0}}));He(()=>{n.init()}),ce(()=>{t(s)&&u()});function u(){h(r,new Blob,!0),o.reset(),h(l,"ready")}async function i(){if(!t(s)){o.error("No file selected for merging.");return}h(l,"loading");const R=await v(t(s).name);if(!R||!R.blob){o.error("Failed to download sound from file name.");return}let I={name:t(s).name,blob:t(s)};const z=n.get_instance();if(!z){o.error("FFmpeg instance is not available.");return}try{h(r,await Pa(z,I,R,t(d),o),!0)}catch(V){o.error(`FFmpeg error: ${V}`);return}h(l,"finished")}async function v(R){const I=_t(R);if(!I)return o.error("Invalid sound URL."),null;try{return{blob:await Ta(I,ee=>{o.log(`Downloading sound... ${ee.toFixed(2)}%`,"download_sound")}),name:`${encodeURIComponent(I)}`}}catch(z){return o.error(`Failed to download sound: ${z}`),null}}var m=Ya(),y=U(m);bt(y,{get current_file(){return t(s)},set current_file(R){h(s,R,!0)}});var E=p(y,2);{var x=R=>{var I=Y(),z=U(I);{var V=A=>{var j=Y(),Z=U(j);{var G=c=>{var M=za(),N=U(M);gt(N,{get current_file(){return t(s)}});var b=p(N,2),k=_(b);Et(k,{get file_name(){return t(s).name},get export_settings(){return t(d)},set export_settings(B){h(d,B,!0)}});var w=p(k,2);w.__click=[Wa,i],f(b),g(c,M)},L=c=>{var M=Xa(),N=U(M);yt(N,{get message_manager(){return o},get ffmpeg_manager(){return n}});var b=p(N,2);{var k=w=>{var B=ja(),P=p(_(B),2),q=_(P),_e=_(q);f(q),f(P);var me=p(P,2),ve=p(me,2),be=_(ve);f(ve),f(B),W((he,we,xe,ke)=>{H(_e,`Final size: ${he??""}`),$(me,"src",we),$(be,"href",xe),$(be,"download",`${ke??""}.webm`)},[()=>Le(t(r).size,{units:"iec"}),()=>URL.createObjectURL(t(r)),()=>URL.createObjectURL(t(r)),()=>Hr(t(s).name)]),g(w,B)};X(b,w=>{t(l)==="finished"&&w(k)})}g(c,M)};X(Z,c=>{t(l)==="ready"?c(G):c(L,!1)})}g(A,j)},ee=A=>{var j=Va(),Z=U(j),G=_(Z);cr(G,{});var L=p(G,2),c=_(L,!0);f(L),pe(),f(Z);var M=p(Z,2);gt(M,{get current_file(){return t(s)}}),W(()=>H(c,t(s).name)),g(A,j)};X(z,A=>{_t(t(s).name)?A(V):A(ee,!1)})}g(R,I)},O=R=>{var I=Ga();g(R,I)};X(E,R=>{t(s)?R(x):R(O,!1)})}g(a,m),T()}ye(["click"]);let De=S(re({open:!1,title:"",content:"",on_close:void 0}));var Za=(a,e)=>t(e).on_close?.(),qa=F('<dialog class="svelte-1dld0ml"><header><h2> </h2></header> <p> </p> <footer><form method="dialog"><button type="submit">Close</button></form></footer></dialog>');function Ka(a,e){C(e,!0);let r=S(null);ce(()=>{t(r)&&t(De).open&&t(r).showModal()});var o=qa(),n=_(o),l=_(n),s=_(l,!0);f(l),f(n);var d=p(n,2),u=_(d,!0);f(d);var i=p(d,2),v=_(i),m=_(v);m.__click=[Za,De],f(v),f(i),f(o),Ue(o,y=>h(r,y),()=>t(r)),W(()=>{H(s,t(De).title),H(u,t(De).content)}),g(a,o),T()}ye(["click"]);var Ja=(a,e,r)=>h(e,t(r).name,!0),Qa=F("<li> </li>"),$a=F('<header class="my-4"><h3>Soundpost Tools</h3> <small>Utilities compatible with <a href="https://github.com/rcc11/4chan-sounds-player">4chan Sounds Player</a>, <a href="https://sleazyfork.org/en/scripts/31045-4chan-external-sounds">4chan External Sounds</a>, etc.</small></header> <main><menu></menu> <!> <!></main>',1);function no(a){const e=[{name:"splitter",component:Da,label:"WebM Maker"},{name:"merger",component:Ha,label:"WebM Merger"}];let r=S("splitter");var o=$a(),n=p(U(o),2),l=_(n);Me(l,21,()=>e,Ie,(u,i)=>{var v=Qa();v.__click=[Ja,r,i];let m;var y=_(v,!0);f(v),W(E=>{m=Fe(v,1,"",null,m,E),H(y,t(i).label)},[()=>({selected:t(r)===t(i).name})]),g(u,v)}),f(l);var s=p(l,2);Me(s,17,()=>e,u=>u.name,(u,i)=>{var v=Y(),m=U(v);{var y=E=>{var x=Y(),O=U(x);Zt(O,()=>t(i).component,(R,I)=>{I(R,{})}),g(E,x)};X(m,E=>{t(r)===t(i).name&&E(y)})}g(u,v)});var d=p(s,2);Ka(d,{}),f(n),g(a,o)}ye(["click"]);export{no as component};
